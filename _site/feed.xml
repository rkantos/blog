<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.2">Jekyll</generator><link href="http://0.0.0.0:8080/feed.xml" rel="self" type="application/atom+xml" /><link href="http://0.0.0.0:8080/" rel="alternate" type="text/html" /><updated>2017-09-26T15:48:18+00:00</updated><id>http://0.0.0.0:8080/</id><title type="html">rkantos’s projects and endeavors in mostly educational times</title><subtitle>rkantos's projects and some school work, mostly in Finnish though sometimes also in English. You can also find me @ rkantos@ircnet</subtitle><entry><title type="html">Linux palvelimet ICT4TN021 2017 H4</title><link href="http://0.0.0.0:8080/2017/09/22/Linux-Palvelimet-H4.html" rel="alternate" type="text/html" title="Linux palvelimet ICT4TN021 2017 H4" /><published>2017-09-22T00:00:00+00:00</published><updated>2017-09-22T00:00:00+00:00</updated><id>http://0.0.0.0:8080/2017/09/22/Linux-Palvelimet-H4</id><content type="html" xml:base="http://0.0.0.0:8080/2017/09/22/Linux-Palvelimet-H4.html">&lt;h1 id=&quot;h4-virtuaalipalvelimet-vps--wordpress&quot;&gt;H4 Virtuaalipalvelimet (VPS) &amp;amp; Wordpress&lt;/h1&gt;

&lt;h1 class=&quot;no_toc&quot; id=&quot;sisältö-&quot;&gt;Sisältö |&lt;/h1&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#h4-virtuaalipalvelimet-vps--wordpress&quot; id=&quot;markdown-toc-h4-virtuaalipalvelimet-vps--wordpress&quot;&gt;H4 Virtuaalipalvelimet (VPS) &amp;amp; Wordpress&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#tehtävänanto-&quot; id=&quot;markdown-toc-tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#r-virtuaalipalvelimet--vagrant&quot; id=&quot;markdown-toc-r-virtuaalipalvelimet--vagrant&quot;&gt;R) Virtuaalipalvelimet &amp;amp; Vagrant&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#lowendbox--lowendtalk-&quot; id=&quot;markdown-toc-lowendbox--lowendtalk-&quot;&gt;LowEndBox &amp;amp; LowEndTalk |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#serverbear-ja-korvaaja-serverscope-&quot; id=&quot;markdown-toc-serverbear-ja-korvaaja-serverscope-&quot;&gt;ServerBear ja korvaaja ServerScope |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#eri-virtualisointitavat-&quot; id=&quot;markdown-toc-eri-virtualisointitavat-&quot;&gt;Eri virtualisointitavat |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#virtuaalipalvelintarjoajien-top3-&quot; id=&quot;markdown-toc-virtuaalipalvelintarjoajien-top3-&quot;&gt;virtuaalipalvelintarjoajien TOP3 |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#vagrant-&quot; id=&quot;markdown-toc-vagrant-&quot;&gt;Vagrant |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#x-oma-domain&quot; id=&quot;markdown-toc-x-oma-domain&quot;&gt;X) Oma domain&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#cloudflare-&quot; id=&quot;markdown-toc-cloudflare-&quot;&gt;Cloudflare |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#s-käyttäjän-public_html--hakemisto-domainin-pääsivulle&quot; id=&quot;markdown-toc-s-käyttäjän-public_html--hakemisto-domainin-pääsivulle&quot;&gt;S) Käyttäjän public_html -hakemisto domainin pääsivulle&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#y-murtautumisyritykset-ssh-lokeilla&quot; id=&quot;markdown-toc-y-murtautumisyritykset-ssh-lokeilla&quot;&gt;Y) Murtautumisyritykset SSH-lokeilla&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#lähteet-&quot; id=&quot;markdown-toc-lähteet-&quot;&gt;Lähteet |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/h3&gt;

&lt;p&gt;Tehtävänanto on osa Tero Karvisen Haaga-Heliassa suoritettavaa Linux-kurssia. http://terokarvinen.com/2017/aikataulu-linux-palvelimet-ict4tn021-4-ti-ja-5-to-alkusyksy-2017-5-op&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;r) Kokeile julkista virtuaalipalvelinta (VPS). Voit vuokrata palvelimen esimerkiksi Linodelta, Amazonilta, DigitalOceanilta, OVH:lta tai monista muista paikoista. Edullisinta on käyttää GitHub Education -paketista DigitalOceanin palveluita.&lt;/p&gt;

  &lt;p&gt;Vaihtoehto: jos et jostain syystä halua vuokrata virtuaalipalvelinta, voit kokeilla tehdä testipalvelimen vagrantilla, mutta tämä ei ole yhtä jännittävää.&lt;/p&gt;

  &lt;p&gt;x) Laita julkinen domain-nimi osoittamaan koneeseesi. NameCheap ja Gandi ovat tunnettuja nimien vuokraajia. GitHub Education -paketista saa NameCheapilta .me domainin ilmaiseksi vuodeksi.&lt;/p&gt;

  &lt;p&gt;s) Laita julkiselle palvelimellesi käyttäjän kotihakemistoon tallennettu sivu näkymään Apachen oletussivuna.&lt;/p&gt;

  &lt;p&gt;y) Etsi julkisen palvelimesi lokeista esimerkkejä murtautumisyrityksistä. Voit etsiä lisätietoa IP-osoitteista ottamatta niihin yhteyttä esimerkiksi komennoilla geoiplookup tai whois.&lt;/p&gt;

  &lt;p&gt;Vapaaehtoisia lisätehtäviä:&lt;/p&gt;

  &lt;p&gt;v) Laita monta DNS-nimeä samaan IP-osoitteeseen. Apache Name Based Virtual Hosting.t) Asenna WordPress. Se on maailman suosituin sisällönhallintajärjestelmä (CMS). Samalla opit asentamaan kolmannen osapuolen valmiita PHP-ohjelmia. WordPress kannattaa asentaa wordpress.org:sta löytyvästä tervapallosta (.tar.gz).&lt;/p&gt;

  &lt;p&gt;u) Kokeile WordPressia kirjoittamalla esimerkkisisältöä.&lt;/p&gt;

  &lt;p&gt;WordPress vapaaehtoisia:&lt;/p&gt;

  &lt;p&gt;c) Ota järkevät URLit (permalinks) käyttöön
d) Vaihda teema
e) Varmuuskopioi sisältö
f) Palauta varmuuskopioitu sisältö puhtaaseen WordPress-asennukseen
g) Tee WordPressiin oma teema
h) Asenna WordPressiin plugin (esim Dofollow)
i) Tee WordPressiin oma plugin
j) Lisää kuvia WordPressiin (ja laita tämä toimimaan)
k) Laita WordPress nimipohjaiseen virtuaalipalvelimeen (http://thello.foo tms)&lt;/p&gt;

  &lt;p&gt;Muita vapaaehtoisia:&lt;/p&gt;

  &lt;p&gt;l) Asenna Drupal ja kokeile sitä
m) Asenna Joomla ja kokeile sitä
n) Hanki virallinen, selainten hyväksymä TLS-sertifikaatti Let’s Encryptistä
o) Vaikea: Tee esimerkkisivu Python Flaskilla
p) Vaikea: Tee esimerkkisivu Ruby on Rails (tuotantotyyppinen, ei pelkkä yhden käyttäjän testipalvelin)
q) Vaikea: Tee esimerkkisivu Python Django:lla (tuotantotyyppinen, ei pelkkä yhden käyttäjän testipalvelin)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;r-virtuaalipalvelimet--vagrant&quot;&gt;R) Virtuaalipalvelimet &amp;amp; Vagrant&lt;/h1&gt;

&lt;p&gt;Tällä hetkellä itsellä ei ole tarvetta virtuaaliapalvelimelle, ja koska en ollut aikaisemmin kuullut Vagrantista, päätin kokeilla sitä. Olen vuokrannut virtuaaliapalvelimia jo vuodesta 2010. Jopa ennen ensimmäisen virtuaalipalvelimen vuokraamistani suunittelin oman virtuaalipalvelinpalvelun perustamista Suomeen. 2010 virtuaalipalvelimien hinnoittelu oli vielä aika kovaa, ja etenkin suomessa näin raon pienemmälle halvempia palvelimia tarjoavalle palveluntarjoajalle. Periaatteessa vieläkin Suomessa olisi hyvin rakoa etenkin hallituille palvelinpalveluntarjoajille. 2010 vuoden jälkeen kuitenkin monta asiaa on muuttunut ja vuosi 2017 taitaa olla kulminoitumispiste sille, että suomestakin alkaa saamaan jo “LEB” (ks. &lt;a href=&quot;https://lowendbox.com/about/&quot;&gt;https://lowendbox.com/about/&lt;/a&gt; ) hintaluokkaan mahtuvia palvelimia.&lt;/p&gt;

&lt;p&gt;Edesvaikuttajina tähän ovat olleet erityisesti C-lion1 tietoliikennemerikaapeli, joka valmistui 2016 palvelemaan erityisesti yrityksiä. &lt;a href=&quot;https://www.cinia.fi/palvelut/kansainvaliset-yhteyspalvelut/c-lion1-merikaapeli.html&quot;&gt;1&lt;/a&gt; Suomessa suuria palvelinkeskuksia on vuoden 2014 jälkeen tullut kuin sieniä sateella. Alla listaa palvelinkeskuksista joita suomessa on otettu käyttöön hieman ennen merikaapelin valmistumista ja sen jälkeen.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Google, Hamina, 2011, jonka jälkeen laajennuksia vuonna 2012 ja 2015 &lt;a href=&quot;http://www.tivi.fi/Kaikki_uutiset/2015-03-11/Yle-Google-laajentaa-rajusti-Haminassa-tilat-moninkertaisiksi-3217212.html&quot;&gt;2&lt;/a&gt;&lt;/em&gt;
&lt;em&gt;Yandex, Mäntsälä, 2014 &lt;a href=&quot;https://yle.fi/uutiset/3-7550739&quot;&gt;5&lt;/a&gt;&lt;/em&gt;
&lt;em&gt;Hetzner, Tuusula, 2017 &lt;a href=&quot;http://www.is.fi/taloussanomat/art-2000001898010.html&quot;&gt;6&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Ja suomalaiset jälkijunassa, kuten aina:
&lt;em&gt;Telia, Helsinki, 2018 &lt;a href=&quot;https://www.telia.fi/yrityksille/tuotteet/tietoliikenne/telia-data-center/datakeskus-pitajanmakeen&quot;&gt;7&lt;/a&gt; *
*Ficolo, Ulvila, 2018 -2019&lt;a href=&quot;https://www.rakennuslehti.fi/2017/09/paakaupunkiseudulle-suunnitellaan-uutta-datakeskusta/&quot;&gt;13&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Edellä mainituista vain oikeastaan Google ja Hetzner ovat kunnostautuneet virtuaalipalvelimien myymisessä suoraan kuluttajille. Googlelta ei Haminasta virtuaalipalvelimia ole kuitenkaan ainakaan vielä ennen vuotta 2017 saanut. Hetzneriltä LEB-kategoriaan mahtuvia virtuaalipalvelimia saanee todennäköisesti heti kun he saavat ensimmäisen palvelinkeskuksensa tulille. Hetzneristä on mainittava vielä se, että he ovat ostaneet kapasiteettiä ns. riittävästi. &lt;a href=&quot;http://www.zdnet.com/article/finlands-baltic-undersea-cable-gets-a-10m-to-help-boost-datacentre-connections/&quot;&gt;12&lt;/a&gt; Tälläisen virtuaalipalvelimen kanssa voi olla mahdollista esimerkiksi alentaa keskieurooppaan suuntautuville yhteyksille aiheutuvaa latenssia jopa yli 10ms verran nykyisiin pääsääntöisesti ruotsin kautta kulkeviin yhteyksiin verrattuna!&lt;/p&gt;

&lt;h4 id=&quot;lowendbox--lowendtalk-&quot;&gt;LowEndBox &amp;amp; LowEndTalk |&lt;/h4&gt;

&lt;p&gt;LowEndBox -sivu on tarkoitettu erittäin halpojen virtuaaliapalvelimien löytämiseen. Sivu listaakin sivuillaan &lt;a href=&quot;https://lowendbox.com/about/&quot;&gt;https://lowendbox.com/about/&lt;/a&gt; ehtoja, joita tarjouksien pitää täyttää. Useimmiten sivuilta löytyy kuitenkin huomattavasti halvempiakin palvelimia. Alle dollarilla kuukaudessa voi löytää luotettavia palveluntarjoajia, joilta saa jaetun CPU-ytimen ja jopa 512MB muistia! Näistä omasta mielestäni ehdottomasti parhain on tällä hetkellä Time4VPS:n kahden vuoden (24€) sopimus , jolla saa n. eurolla kuukaudessa 512MB -muistilla varustetun OpenVZ:n perustuvan virtuaalipalvelimen.&lt;/p&gt;

&lt;p&gt;Tällä hetkellä hyviä tarjouksia löytyy parhaiten LowEndTalk, eli LowEndBox-sivuston foorumin puolelta. Parempia tarjouksiakin kuin Time4VPS on saatavilla, joskin palveluntarjojien luotettavuus ei välttämättä ole Time4VPS tai Openvz.io -tasoa. Tämän takia halvimpien palveluntarjoajien kanssa toimiessa, suosittelen maksamaan palvelimista kuukausiperustaisesti, tai maksimissaan&lt;/p&gt;

&lt;p&gt;Muutama mainittava tarjous 2017 Syyskuulta:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.lowendtalk.com/discussion/124916/gullo-s-hosting-2-year-vps-hosting-is-back#latest&quot;&gt;https://www.lowendtalk.com/discussion/124916/gullo-s-hosting-2-year-vps-hosting-is-back#latest&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2 $ / vuosi maksava virtuaalipalvelin 128MB-muistilla varustettuna. Palvelimet ovat NAT:n takana, joten palvelujen saattamiseksi näkyviin julkiseen internetiin voi joutua tekemään hieman enemmän konfigurointia. Sopii hyvin esimerkiksi sellaisiin tarkoituksiin, joissa suurinosa yhteyksistä muodostetaan palvelimen suunnalta, kuten esimerkiksi uptime-seurantaan tai irc-shellin pitoon. Näin pieniin hintaluokkiin mennessä on mainittava myös, että usein rajoitteena näissä toimii IPv4-osoitteiden “hinnat”. Yleinen lisä-ip-osoitteiden hinta virtuaalipalvelimille on 0.5-2€/kk/ip. Täten on tavallista että virtuaalipalvelin, jolla on oma julkinen IPv4-osoite maksaa vähintään 10€/vuosi. Kannattaa siis olla varuillaan halvemmalla palveluja tarjoavien palveluntarjoajien kanssa, sillä joko palveluja ylläpidetään 
a. liikevaihdon kasvattamiseksi, 
b. ilmaisella sähköllä, 
c. ilmaisilla ip-osoitteilla, tai,
d. palveluntarjoaja yrittää kahmita mahdollisimman paljon rahaa asiakkailta kadotakseen yht’äkkiä…&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.lowendtalk.com/discussion/105291/let-storage-i-m-back#latest&quot;&gt;https://www.lowendtalk.com/discussion/105291/let-storage-i-m-back#latest&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;n. 50€/2v tai n. 100€/3v maksava 1TB-tilalla varustettu “varastointivirtuaaliapalvelin”. Tälläiselle palvelimelle, tai parille, jos haluaa huomioida varmuuskopiot voisi pystyttää esimerkiksi oman Nextcloud-palvelimen. Näin ei tarvitsisi luottaa isoihin toimijoihin. Pelkällä varastointikoolla mitattuna hinta on hyvin kilpailukykyinen Googlen ja Microsoftin pilvipalveluiden hinnoittelun kanssa. Tämä siis Googlen 1TB tilan maksaessa 100€/1v ja Microsoftin O365:n 1TB tilan maksaessa 70€/1v. Kumpaankin palveluun kuuluu luonnollisesti erinomaiset sähköpostipalvelut, dokumenttienkäsittely ja jako-ominaisuudet. Microsoftin palveluun sisältyy toki myös Office-paketin viimeisimmät työpöytäsovellukset. Omille linux-palvelimille on toki tarjolla monia avoimen lähdekoodin vaihtoehtoja, mutta niiden konfigurointikin toki vaatii oman aikansa.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.lowendtalk.com/discussion/124610/hostens-2-40ghz-768mb-15gb-1tb-from-0-99-eur-mo-instant-setup#latest&quot;&gt;https://www.lowendtalk.com/discussion/124610/hostens-2-40ghz-768mb-15gb-1tb-from-0-99-eur-mo-instant-setup#latest&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;OpenVZ:hen perustuvalla vuoden sopimuksella reilut 12€/1v maksava 768MB muistia varustettu virtuaalipalvelin. Vaikka palveluntarjoaja vaikuttaa luotettevalta viitaten 13 vuoden kokemukseen, ovat archive.org ja whois -hakujen tekeminen suositeltavaa. Näin ainakin joitakin faktoja pystyy tarkastamaan. Tällä palveluntarjoajalla ovat käytössä myöskin tavalliset pyörivät levyt. Samaan hintaan löytyy todennäköisesti myös täysin SSD-levyihin nojaavia virtuaaliapalvelimia.&lt;/p&gt;

&lt;h4 id=&quot;serverbear-ja-korvaaja-serverscope-&quot;&gt;ServerBear ja korvaaja ServerScope |&lt;/h4&gt;

&lt;p&gt;Eri LEB-palvelimien vertailuun on muutaman vuoden ajan ollut erilaisia suorituskykytesteihin perustuvia vertailusivustoja. Näistä tunnetuin oli ServerBear, joka kuitenkin lopetti toimintansa oikeasti 2014, mutta virallisesti vasta viimevuonna. &lt;a href=&quot;https://twitter.com/ServerBear/status/765034545703813121&quot;&gt;8&lt;/a&gt; ServerBearin tilalle näyttää tällä hetkellä tulleen ainakin ServerScope &lt;a href=&quot;https://www.lowendtalk.com/discussion/85392/building-a-serverbear-alternative/p1&quot;&gt;9&lt;/a&gt;. ServerScope testaa ServerBearin tapaan avoimeen lähdekoodiin perustuvalla skriptillä palvelimien eri ominaisuuksia verkon nopeudesta massamuistin I/O (operaatioita sekunnissa) nopeuteen. &lt;a href=&quot;https://github.com/serverscope/serverscope-benchmark&quot;&gt;10&lt;/a&gt; Muistutan että jos haluat ajaa mitä tahansa ServerScopen kaltaisia skriptejä omalla (virtuaali)palvelimellasi, suosittelen että teet sen heti kun olet ostanut ja asentanut palvelimen. Skripti käyttää luonnollisesti pääkäyttäjän oikeuksia, ja täten sillä on pääsy kaikkeen mitä palvelimellasi on. Tietoturvan säilyttämiseksi kannattaa virtuaalipalvelimen asennus suorittaa tyhjästä heti skirptin suorittamisen jälkeen uudelleen.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/serverscope.png&quot; alt=&quot;ServerScope Syyskuu 2017&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ServerScope:n etusivu ja top10 hinta-laatusuhteen omaavat virtuaalipalvelimet. Kärjessä mainitsemisen arvoisia tarjoajia ainakin BuyVM &lt;a href=&quot;https://lowendbox.com/?s=buyvm&amp;amp;searchsubmit=Find&quot;&gt;11&lt;/a&gt; Time4VPS tarjoamat palvelimet ovat tähän asti halvimmat alle 700km etäisyydellä (Helsinki) suomesta löytyvät palvelimet. Kyseessä on usein myös yksi halvimmista Eurooppalaisista palveluntarjoajista hinta-laatusuhteella mitattuna. Vielä lähempänä OpenVZ.io tarjoaa Tukholmasta halpoja virtuaalipalvelimia “Extreme” -luokassaan. Extreme -luokka OpenVZ.io:lla tarkoittaa virtuaalipalvelintarjontaa sellaisista sijanneista, joissa palveluntarjoajalla on mahdollisesti paikallisesti vain yksi tai muutama fyysinen palvelin.&lt;/p&gt;

&lt;h4 id=&quot;eri-virtualisointitavat-&quot;&gt;Eri virtualisointitavat |&lt;/h4&gt;

&lt;p&gt;Eri palveluntarjoajat käyttävät erilaisia tapoja virtualisoidakseen asiakaspalvelimia. Suosituimpia näistä ovat ehkä KVM, Xen ja OpenVZ. Lisäksi palveluntarjoajat käyttävät näiden virtualisointiteknologioiden lisäksi erilaisia hallintapaneeliratkaisuja. Näistä käytetyimpiä LEB-palveluntarjoajilla ovat SolusVM ja Virtualizor sekä WHCMS:n erilaiset lisäosat. WHCMS on ehdottomasti laajin käytössä oleva CRM, jota eri palveluntarjoajat käyttävät asiakkaiden ‘rajapintana’. WHCMS hoitaa yleensä siis laskutuksen, sähköpostituksen, ticket-pohjaisen viestityksen ja kaiken muun palvelujen myynnin automatisointiin tarvittavan työn.&lt;/p&gt;

&lt;p&gt;Valitessasi omaa virtualisointialustaa pystyy yleensä nopeasti päättämään mitä alustaa kannattaa käyttää. LEB-palvelimien hinnan takia on mielestäni myös järkevää käyttää useampaa palvelinta eri tarkoituksiin.&lt;/p&gt;

&lt;p&gt;Omaa kerneliä tarvittaessa kannattaa halvimman vaihtoehdon etsiminen aloittaa palveluntarjoajista jotka käyttävät KVM ja Xen-pohjaisia ratkaisuja, koska ne ovat ylivoimaisesti halvimpia tapoja palveluntarjoajille toteuttaa ympäristöjä, joissa asiakas voi käyttää kokonaan käyttöjärjestelmän kernelistä erillään olevia virtuaalipalvelmia. Muita tälläisiä ratkaisuja tarjoavat mm. Proxmox VE, Vmware, ja Hyper-V (Windows).&lt;/p&gt;

&lt;p&gt;Yleensä suurimpaan osaan palveluita, joita linux-palvelimella voi pyörittää riittää jokin ohjelmapohjainen tai osittain-ohjelmapohjainen virtualisointiteknologia, kuten OpenVZ tai LXC. Ylivoimaisesti suosituin näistä lienee puhtaassa LEB-virtualisoinnissa OpenVZ. OpenVZ:lla pärjäät todennäköisesti niin kauan kun sinun ei tarvitse tehdä muutoksia mihinkään, mikä vaatii uutta moduulia lisättäväksi kerneliin. Tälläisiä muutoksia ovat esimerkiksi monet verkkoihin liittyvät putkitukset, kuten 6to4 reitittimet, VPN:t jne. Kaikki OpenVZ-palveluntarjoajat joita olen tähän mennessä käyttänyt ovat kuitenkin tarjonneet tärkeimpiä moduleita, kuten OpenVPN:n käyttöön vaadittavan tun/tap -modulin. Myös libfuse-kernelmoduli, joka vaaditaan verkon yli toimivien tiedostojärjestelmien käyttöön, on saatavilla useimmilta OpenVZ palveluntarjoajilta.&lt;/p&gt;

&lt;p&gt;Lisää eri virtualisointitavoista, niiden eduista ja hyödyistä lisää täältä:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://veesp.com/en/blog/virtualization-technologies-comparison&quot;&gt;https://veesp.com/en/blog/virtualization-technologies-comparison&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;virtuaalipalvelintarjoajien-top3-&quot;&gt;virtuaalipalvelintarjoajien TOP3 |&lt;/h4&gt;

&lt;p&gt;Omaa tiukan budjetin virtuaalipalvelintarjoajaa hakiessa lähtisin liikkeelle näistä palveluntarjoajista:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Openvz.io, Nimensä mukaisesti OpenVZ, jolloin käytössä isäntäkoneen kernel&lt;/li&gt;
  &lt;li&gt;Time4vps, Ehdottomasti ykkönen jos tarvitaan oma kernel&lt;/li&gt;
  &lt;li&gt;Scaleway, tarjonnassa luotettavia virtuaalipalvelimia, mutta palveluntarjoajan ehdoton hienous on “virtuaalipalvelimen hinnoin” tuotetut dedikoidut palvelimet. Palveluntarjoaja on tietääkseni yksi ainoita pienempiä tarjoajia isojen tarjoajien kuten Googlen ja Amazonin ulkopuolella, jotka ovat kehittäneet täysin omia palvelinkehikoita ja niihin sopivia suurtiheystietokonekortteja: (https://www.youtube.com/watch?v=XFhgSKNJP2s)&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;vagrant-&quot;&gt;Vagrant |&lt;/h3&gt;

&lt;p&gt;Käytin tässä Tero Karvisen esimerkkiä &lt;a href=&quot;http://terokarvinen.com/2017/virtual-machine-in-two-minutes-install-vagrant-and-virtualbox-on-ubuntu-16-04-3-live-usb&quot;&gt;4&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Install VirtualBox and Vagrant&lt;/p&gt;

  &lt;p&gt;$ sudo apt-get update
$ sudo apt-get -y install virtualbox vagrant
Create a New Virtual Machine &amp;amp; Connect&lt;/p&gt;

  &lt;p&gt;$ vagrant init bento/ubuntu-16.04
$ vagrant up
$ vagrant ssh&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ensin asensin Vagrantin komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get -y install virtualbox vagrant&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Tämän jälkeen komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant init bento/ubuntu-16.04&lt;/code&gt; saimme ladattua Vagrantin “levykuvan”, josta virtualisoitu Ubuntun asennus käynnistetään.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/Vagrant-A.gif&quot; alt=&quot;Vagrant-A / Lataus&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Lopuksi käynnistetään Vagrant ja yhdistetään siihen SSH:lla. &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt; ja &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant ssh&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/Vagrant-B.gif&quot; alt=&quot;Vagrant-B / Käynnistys&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;x-oma-domain&quot;&gt;X) Oma domain&lt;/h1&gt;

&lt;h4 id=&quot;cloudflare-&quot;&gt;Cloudflare |&lt;/h4&gt;

&lt;p&gt;Käytän nimipalvelintarjoajani Cloudflarea, jolla on globaalisti toteutettu nimipalvelin-järjestelmä. Cloudflaren ilmaisella tunnuksella saa käyttöön käsittääkseni loputtomasti nimipalvelin palveluita eri domaineille. Viimeisimmän domainin rekisteröin Domainhotelli Oy:n kautta, sillä jostain syystä Ficoran palveluntarjoajien verkkotunnuspalveluun tekemäni tunnukset olivat poistettu taas käytöstä. Domainhotellista domainin hankkiminen on yhtä triviaalia kuin kaikista muistakin domainin -hankintapalveluista. Sieltä saa .fi -domainin kuitenkin nettohintaan 9€/vuosi. Domainhotellillta saa käyttöön myös oman DNS-nimipalvelun, joka vaaditaan, että Cloudflaren nimipalvelimia voi alkaa käyttämään. Tässäkin välissä voidaan tosin käyttää omalle virtuaalipalvelimelle asennettavaa nimipalvelinta, ja laittaa nimipalvelinasetukset osoittamaan Domainhotellin konfigurointipaneelista oman (bind) palvelimen dns-osoitteisiin.&lt;/p&gt;

&lt;p&gt;En ole täysin varma “aktivoituiko” Domainhotellista hankkimani domaini viimeksi käyttämällä pelkkiä Cloudflaren DNS-palvelimia, vai auttoiko siihen se että konfiguroin ensin Domainhotellin DNS-palvelimet domainille. Suoraan Ficoralta domaineja hankittaessa vaaditaan jokin nimipalvelin ennen kun domain “aktivoituu”. Aktivoituminen vaaditaan domainin lisäämiseksi Cloudflarelle.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/domainhotelli.png&quot; alt=&quot;Domainhotelli DNS-asetukset&quot; /&gt;
kuva hallintapaneelista
&lt;img src=&quot;/img/cloudflare-a-tietue.gif&quot; alt=&quot;Cloudflaren asetukset&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;s-käyttäjän-public_html--hakemisto-domainin-pääsivulle&quot;&gt;S) Käyttäjän public_html -hakemisto domainin pääsivulle&lt;/h1&gt;

&lt;p&gt;Yksinkertaisimmin saamme yhden käyttäjän public_html -hakemiston näkymään rekisteröimämme domainin -etusivulla muokkaamalla kyseiselle käyttäjälle luotua virtual hostia, tässä tapauksessa /etc/apache2/sites-available/rkantos.conf lisäämällä ensimmäisen rivin &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;VirtualHost *:80&amp;gt;&lt;/code&gt;jälkeen &lt;code class=&quot;highlighter-rouge&quot;&gt;ServerName rekisteröimämmedomain.fi&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Tällöin konfiguraatiotiedoston alun tulisi näyttää tältä:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost *:80&amp;gt;
        ServerName rekisteröimämmedomain.fi

        ServerAdmin webmaster@localhost
        DocumentRoot /home/rkantos/public_html/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;y-murtautumisyritykset-ssh-lokeilla&quot;&gt;Y) Murtautumisyritykset SSH-lokeilla&lt;/h1&gt;

&lt;p&gt;Omilla virtuaaliapalvelimillani olen estänyt ylimääräiset ssh-kirjautumis tai murtautumisyritykset Fail2ban:lla. Fail2ban estää ip-osoitteet määrätyksi aikaa liian monen yrityskerran jälkeen. Vähän ajan kuluttua Fail2ban käyttöönoton jälkeen murtautumisyritykset vähenivät selvästi vaikka kaikki aikaisemmin estetyt ip-osoitteet voivat omalla konfiguraatiolla yrittää kirjautumista muutamien minuuttien päästä uudelleen.&lt;/p&gt;

&lt;p&gt;Olin kuitenkin juuri ottanut toimintaan toisen SSH-palvelimen samalla virtuaalipalvelimella, mutta eri portissa. Tämäkin osa palvelimesta saa näköjään oman osansa kirjautumisyrityksistä. Yhdistävänä tekijänä vaikuttaa olevan käyttäjätunnus “admin” tai “ftp”/”ftpuser”&lt;/p&gt;

&lt;p&gt;Jokaisessa lokiviestissä toistuu sama ssh-daemonin (sshd) raportoima viesti epäonnistuneesta kirjautumisyrityksestä joko väärällä käyttäjätunnuksella tai salasanalla.&lt;/p&gt;

&lt;p&gt;Ensimmäisessä viestissä sshd kertoo että konfiguroinnin mukaisen autentikointimetodin kautta (PAM), ei löydy käyttäjää ftpuser. Kirjautumisyritys tulee IP-osoitteesta 50.62.56.171 ja asiakasportista 27657. Ensimmäisen salasanayrityskerran jälkeen käyttäjä, tai todennäköisemmin botti, yrittää salasanaa samalle käyttäjälle vielä kolmeen kertaan. Tämän jälkeen ssh-daemon konfiguroinnin mukaisesti tiputtaa yhteyden.
Luonnollisesti IP-osoite löytyy AbuseIPDB -sivustolta: &lt;a href=&quot;https://www.abuseipdb.com/check/50.62.56.171&quot;&gt;https://www.abuseipdb.com/check/50.62.56.171&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sep 20 18:36:20 d sshd[22046]: Invalid user ftpuser from 50.62.56.171 port 27657
Sep 20 18:36:20 d sshd[22046]: input_userauth_request: invalid user ftpuser [preauth]
Sep 20 18:36:20 d sshd[22046]: pam_unix(sshd:auth): check pass; user unknown
Sep 20 18:36:20 d sshd[22046]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=50.62.56.171
Sep 20 18:36:22 d sshd[22046]: Failed password for invalid user ftpuser from 50.62.56.171 port 27657 ssh2
Sep 20 18:36:23 d sshd[22046]: pam_unix(sshd:auth): check pass; user unknown
Sep 20 18:36:24 d sshd[22046]: Failed password for invalid user ftpuser from 50.62.56.171 port 27657 ssh2
Sep 20 18:36:24 d sshd[22046]: pam_unix(sshd:auth): check pass; user unknown
Sep 20 18:36:26 d sshd[22046]: Failed password for invalid user ftpuser from 50.62.56.171 port 27657 ssh2
Sep 20 18:36:26 d sshd[22046]: Connection closed by 50.62.56.171 port 27657 [preauth]
Sep 20 18:36:26 d sshd[22046]: PAM 2 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser= rhost=50.62.56.171

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Tämä kirjautumisyritys on muuten samanlainen edellisen kanssa, paitsi että IP-osoite on eri. Tälläkin kertaa sama IP-osoite on raportoitu AbuseIPDB -sivustolla jo useampaan otteeseen: &lt;a href=&quot;https://www.abuseipdb.com/check/58.242.83.19&quot;&gt;https://www.abuseipdb.com/check/58.242.83.19&lt;/a&gt;
Koska toisen palvelimen SSH-konfiguroinnissa oli vielä merkintä &lt;code class=&quot;highlighter-rouge&quot;&gt;PermitRootLogin prohibit-password&lt;/code&gt; - oli täten root -käyttäjätunnus käytettävissä, mutta vain ilman salasanaa. &lt;a href=&quot;https://askubuntu.com/questions/449364/what-does-without-password-mean-in-sshd-config-file&quot;&gt;14&lt;/a&gt; Käytännössä “prohibit-password” tarkoittaa ei suinkaan sitä että root-tunnukselle pystyy kirjautumaan ilman salasanaa, vaan sitä, että salasanalla tunnukselle kirjautumiseen vaaditaan ssh-avain (privatekey). Tässä kohtaa en täysin ymärrä miksi PAM ylipäätään ensimmäisen kirjautumisyrityksen jälkeen tekee lokimerkintöjä, sillä ssh-daemonin ei pitäisi hyväksyä root-tunnukselle mitään muita kirjautumistapoja kuin ssh-avain.&lt;/p&gt;

&lt;p&gt;Tässä lokimerkinnässä näkyy myös nähtävästi PAM:n raportoima 5 kirjautumisyrityksen raja, jolloin ssh-yhteys tiputetaan. &lt;code class=&quot;highlighter-rouge&quot;&gt;PAM 5 more authentication failures;&lt;/code&gt;
Vaikkakin PAM on käytössä, mutta root-käyttäjän salasanakirjautuminen ei, näyttää SSH-daemonin PAM-moduuli silti liittyvän jotenkin SSH-daemonin oletuskonfiguroinnista johtuvaan liiallaisten kirjautumisyrityskertojen estoon.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sep 21 21:13:10 d sshd[5969]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=58.242.83.19  user=root
Sep 21 21:13:11 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:14 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:18 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:21 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:24 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:27 d sshd[5969]: Failed password for root from 58.242.83.19 port 62393 ssh2
Sep 21 21:13:27 d sshd[5969]: error: maximum authentication attempts exceeded for root from 58.242.83.19 port 62393 ssh2 [preauth]
Sep 21 21:13:27 d sshd[5969]: Disconnecting: Too many authentication failures [preauth]
Sep 21 21:13:27 d sshd[5969]: PAM 5 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser= rhost=58.242.83.19  user=root
Sep 21 21:13:27 d sshd[5969]: PAM service(sshd) ignoring max retries; 6 &amp;gt; 3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Viimeinen merkintä on jälleen lähes identtinen ensimmäisen kanssa. IP löytyy jälleen AbuseIPDB:stä: &lt;a href=&quot;https://www.abuseipdb.com/check/64.50.176.226&quot;&gt;https://www.abuseipdb.com/check/64.50.176.226&lt;/a&gt; Käyttäjätunnusta ei taaskaan ole olemassa palvelimellani, mutta todennäköinen botti yrittää silti kirjautua salasanan avulla siihen 5 kertaa.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sep 21 21:02:36 d sshd[23742]: Invalid user admin from 64.50.176.226 port 33974
Sep 21 21:02:36 d sshd[23742]: input_userauth_request: invalid user admin [preauth]
Sep 21 21:02:36 d sshd[23742]: pam_unix(sshd:auth): check pass; user unknown
Sep 21 21:02:36 d sshd[23742]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=64.50.176.226
Sep 21 21:02:38 d sshd[23742]: Failed password for invalid user admin from 64.50.176.226 port 33974 ssh2
Sep 21 21:02:38 d sshd[23742]: pam_unix(sshd:auth): check pass; user unknown
Sep 21 21:02:40 d sshd[23742]: Failed password for invalid user admin from 64.50.176.226 port 33974 ssh2
Sep 21 21:02:40 d sshd[23742]: pam_unix(sshd:auth): check pass; user unknown
Sep 21 21:02:42 d sshd[23742]: Failed password for invalid user admin from 64.50.176.226 port 33974 ssh2
Sep 21 21:02:42 d sshd[23742]: Connection closed by 64.50.176.226 port 33974 [preauth]
Sep 21 21:02:42 d sshd[23742]: PAM 2 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser= rhost=64.50.176.226
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;Muokattu / edited 26.9.2017 1645GMT: Lisätty toimivat linkit, muokattu Vagrant kohta muodosta&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Lopuksi käynnistetään Vagrant ja yhdistetään siihen SSH:lla. &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt; ja &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant ssh&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;muotoon: Lopuksi Vagrant käynnistyy ja yhdistetämme siihen SSH:lla komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant ssh&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Poistettu myös tyhjä Hx -väliotsikko&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Muokattu 26.9.2017 1650GMT&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;korjattu kuvalinkit&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/rkantos/blog/commits/gh-pages/_posts/2017-09-22-Linux-Palvelimet-H4.md&quot;&gt;Sivun versiohistorian näät myös Githubista&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;lähteet-&quot;&gt;Lähteet |&lt;/h3&gt;

&lt;p&gt;[1: https://www.cinia.fi/palvelut/kansainvaliset-yhteyspalvelut/c-lion1-merikaapeli.html&lt;/p&gt;

&lt;p&gt;[2: https://yle.fi/uutiset/3-6915349&lt;/p&gt;

&lt;p&gt;[3: http://www.tivi.fi/Kaikki_uutiset/2015-03-11/Yle-Google-laajentaa-rajusti-Haminassa-tilat-moninkertaisiksi-3217212.html&lt;/p&gt;

&lt;p&gt;[4: http://terokarvinen.com/2017/virtual-machine-in-two-minutes-install-vagrant-and-virtualbox-on-ubuntu-16-04-3-live-usb&lt;/p&gt;

&lt;p&gt;[5: https://yle.fi/uutiset/3-7550739&lt;/p&gt;

&lt;p&gt;[6: http://www.is.fi/taloussanomat/art-2000001898010.html&lt;/p&gt;

&lt;p&gt;[7: https://www.telia.fi/yrityksille/tuotteet/tietoliikenne/telia-data-center/datakeskus-pitajanmakeen&lt;/p&gt;

&lt;p&gt;[8: https://twitter.com/ServerBear/status/765034545703813121&lt;/p&gt;

&lt;p&gt;[9: https://www.lowendtalk.com/discussion/85392/building-a-serverbear-alternative/p1&lt;/p&gt;

&lt;p&gt;[10: https://github.com/serverscope/serverscope-benchmark&lt;/p&gt;

&lt;p&gt;[11: https://lowendbox.com/?s=buyvm&amp;amp;searchsubmit=Find&lt;/p&gt;

&lt;p&gt;[12: http://www.zdnet.com/article/finlands-baltic-undersea-cable-gets-a-10m-to-help-boost-datacentre-connections/&lt;/p&gt;

&lt;p&gt;[13: https://www.rakennuslehti.fi/2017/09/paakaupunkiseudulle-suunnitellaan-uutta-datakeskusta/&lt;/p&gt;

&lt;p&gt;[14: https://askubuntu.com/questions/449364/what-does-without-password-mean-in-sshd-config-file&lt;/p&gt;</content><author><name></name></author><category term="linux" /><category term="haaga-helia" /><category term="koulu" /><category term="infra" /><category term="such" /><category term="wow" /><category term="test" /><category term="tags" /><summary type="html">H4 Virtuaalipalvelimet (VPS) &amp;amp; Wordpress</summary></entry><entry><title type="html">Linux palvelimet ICT4TN021 2017 H3</title><link href="http://0.0.0.0:8080/2017/09/11/Linux-Palvelimet-H3.html" rel="alternate" type="text/html" title="Linux palvelimet ICT4TN021 2017 H3" /><published>2017-09-11T00:00:00+00:00</published><updated>2017-09-11T00:00:00+00:00</updated><id>http://0.0.0.0:8080/2017/09/11/Linux-Palvelimet-H3</id><content type="html" xml:base="http://0.0.0.0:8080/2017/09/11/Linux-Palvelimet-H3.html">&lt;h1 class=&quot;no_toc&quot; id=&quot;sisältö-&quot;&gt;Sisältö |&lt;/h1&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#tehtävänanto-&quot; id=&quot;markdown-toc-tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#a-apache-ja-käyttäjäkohtaiset-kotisivut-&quot; id=&quot;markdown-toc-a-apache-ja-käyttäjäkohtaiset-kotisivut-&quot;&gt;A) Apache ja käyttäjäkohtaiset kotisivut |&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#apache2--asennus&quot; id=&quot;markdown-toc-apache2--asennus&quot;&gt;Apache2 | Asennus&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#apache2---käyttäjien-kotisivut&quot; id=&quot;markdown-toc-apache2---käyttäjien-kotisivut&quot;&gt;Apache2 |  Käyttäjien kotisivut&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#apache2--muutoksien-käyttöönotto-ja-toiminnan-varmistus&quot; id=&quot;markdown-toc-apache2--muutoksien-käyttöönotto-ja-toiminnan-varmistus&quot;&gt;Apache2 | Muutoksien käyttöönotto ja toiminnan varmistus&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#b-apachen-ilmoittamat-statukset&quot; id=&quot;markdown-toc-b-apachen-ilmoittamat-statukset&quot;&gt;B) Apachen ilmoittamat statukset&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#http-tilannekoodi-200--onnistunut-sivulataus&quot; id=&quot;markdown-toc-http-tilannekoodi-200--onnistunut-sivulataus&quot;&gt;HTTP tilannekoodi 200 | onnistunut sivulataus&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#http-tilannekoodi-404--sivua-ei-löytynyt&quot; id=&quot;markdown-toc-http-tilannekoodi-404--sivua-ei-löytynyt&quot;&gt;HTTP tilannekoodi 404 | sivua ei löytynyt&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#d-apachen-konfigurointivirhe--open-xchange&quot; id=&quot;markdown-toc-d-apachen-konfigurointivirhe--open-xchange&quot;&gt;D) Apachen konfigurointivirhe | Open-Xchange&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#virheilmoitus--open-xchange&quot; id=&quot;markdown-toc-virheilmoitus--open-xchange&quot;&gt;Virheilmoitus | Open-Xchange&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#e--phpmyadmin&quot; id=&quot;markdown-toc-e--phpmyadmin&quot;&gt;E)  phpMyAdmin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#j-lamp--asennus&quot; id=&quot;markdown-toc-j-lamp--asennus&quot;&gt;J) LAMP -asennus&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#apache2-testaus-&quot; id=&quot;markdown-toc-apache2-testaus-&quot;&gt;Apache2 testaus |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#mysql-ja-php-testaus--phpmyadmin&quot; id=&quot;markdown-toc-mysql-ja-php-testaus--phpmyadmin&quot;&gt;MySQL ja PHP testaus | phpMyadmin&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#lähteet-&quot; id=&quot;markdown-toc-lähteet-&quot;&gt;Lähteet |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/h3&gt;

&lt;p&gt;Tehtävänanto on osa Tero Karvisen Haaga-Heliassa suoritettavaa Linux-kurssia. http://terokarvinen.com/2017/aikataulu-linux-palvelimet-ict4tn021-4-ti-ja-5-to-alkusyksy-2017-5-op&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;a) Asenna Apache, laita käyttäjien kotisivut (http://example.com/~tero) toimimaan. Testaa esimerkkikotisivulla. Tämä a-kohta on vaihdettu.&lt;/p&gt;

  &lt;p&gt;b) Surffaa oman palvelimesi weppisivuja. Etsi Apachen lokista esimerkki onnistuneesta (200 ok) sivulatauksesta ja epäonnistuneesta (esim 404 not found) sivulatauksesta. Analysoi rivit.Tee jokin seuraavista (yksi riittää, useampi vapaaehtoisena lisätehtävänä):&lt;/p&gt;

  &lt;p&gt;c) Tee virhe weppipalvelimella ajettavaan koodiin (esim PHP tai Python), etsi se lokista ja analysoi tuo lokirivi&lt;/p&gt;

  &lt;p&gt;d) Tee virhe johonkin Apachen asetustiedostoon, etsi ja analysoi tuo rivi. Etsimiseen sopivat esimerkiksi Apachen omat lokit, syslog sekä ‘apache2ctl configtest’.&lt;/p&gt;

  &lt;p&gt;e) Asenna ja kokeile PhpMyAdmin:a tai jotain muuta valmista weppiliittymää tietokantojen hallinnointiin.&lt;/p&gt;

  &lt;p&gt;f) Tee palvelimella ajettava weppiohjelma, joka tekee käyttäjälle jonkin yksinkertaisen laskun (esim. painoindeksi BMI)&lt;/p&gt;

  &lt;p&gt;g) Tee palvelimella ajettava weppiohjelma, joka käyttää tietokantaa. Voit tehdä jonkin yksinkertaisen CRUD-ohjelman, esimerkiksi TODO-listan&lt;/p&gt;

  &lt;p&gt;h) Tee Apachelle uusi sivu, joka näkyy suoraan palvelimen pääsivulla, mutta jonka sivuja voi muokata normaalin käyttäjän oikeuksilla (name based virtual host, DocumentRoot käyttäjän kotihakemistoon).&lt;/p&gt;

  &lt;p&gt;i) Kuinka monta eri HTTP Status:ta (200, 404, 500…) saat aiheutettua lokeihin? Selitä, miten aiheutit tilanteet ja analysoi yksi rivi kustakin statuksesta.&lt;/p&gt;

  &lt;p&gt;j) Asenna LAMP (Linux, Apache, MySQL, PHP). Testaa kunkin komponentin toiminta. Testaa lopuksi kokonaisuus. (Voit aloittaa tilanteesta, jossa Linux-käyttöjärjestelmä on jo asennettu, mutta ei muita (AMP) osia.&lt;/p&gt;

  &lt;p&gt;k) Kokeile jotain Flaskin uutta ominaisuutta flask-testipalvelimessa. Voit kokeilla esim. muotteja (templates), tietokantaa tai syötteiden ottamista lomakkeilta (forms).&lt;/p&gt;

  &lt;p&gt;l) Asenna Python Flask + PostgreSQL + Apache mod WSGI. Testaa kunkin komponentin toiminta. Testaa lopuksi kokonaisuus. (vaikea)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;a-apache-ja-käyttäjäkohtaiset-kotisivut-&quot;&gt;A) Apache ja käyttäjäkohtaiset kotisivut |&lt;/h1&gt;

&lt;h4 id=&quot;apache2--asennus&quot;&gt;Apache2 | Asennus&lt;/h4&gt;

&lt;p&gt;Apachen asennuspaketti löytyy suurimpien distrojen oletusohjelmavarastoista ja sen asentaminen onnistuu komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install apache2&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Käyttämässäni Ubuntu 16.04.3 -versiossa Apachen oletuskonfigurointitiedostot ovat valmiina näyttämään sivun kaikissa kyseiseen tietokoneeseen osoittavissa osoitteissa. Tämä selviää oletus virtuaali-isännän konfigurointitiedostosta, joka löytyy polusta &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/apache2/sites-available/000-default.conf&lt;/code&gt;Ubuntulla voit muokata tiedostoa komennolla &lt;em&gt;sudoedit&lt;/em&gt;, joka avaa oletuksena helppokäyttöisen Nano -editorin.&lt;/p&gt;

&lt;p&gt;Tiedostosta löytyy rivi &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;VirtualHost *:80&amp;gt;&lt;/code&gt;,  jossa tähteä käytetään villikorttina kuvaamaan mitä tahansa osoitetta joka koneeseen osoittaa. Kaksoispiste ja numero kuvaa sitä porttia missä Apache2 -palvelin kuuntelee pyyntöjä. Tässä on kyseessä portti 80, joka on normaali HTTP-portti. Voit halutessasi estää oletussivuston näkymisen kaikkiin osoitteisiin, joko muokkaamalla VirtualHost -riviä näin, jolloin palvelin kuuntelee vain paikallisia pyyntöjä:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;VirtualHost localhost:80&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Tai poistamalla koko oletussivun konfiguroinnin käytöstä komennolla:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;a2dissite 000-default  &amp;amp;&amp;amp; sudo service apache2 reload&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;apache2---käyttäjien-kotisivut&quot;&gt;Apache2 |  Käyttäjien kotisivut&lt;/h4&gt;

&lt;p&gt;Käyttäjien kotisivut saadaan toimintaan lisäämällä käyttäjän, jolle kotisivut halutaan lisätä, kotihakemistoon kansio &lt;code class=&quot;highlighter-rouge&quot;&gt;public_html&lt;/code&gt;. Ubuntulla Apachen mukana tulevat konfigurointiskriptit sisältävät konfigurointityökalun käyttäjäkohtaisten kotihakemistojen lisäämiseen.&lt;/p&gt;

&lt;p&gt;Otetaan siis käyttäjien omat kotisivut käyttöön komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo a2enmod userdir&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Luodaan siis sisäänkirjautuneell käyttäjälle kotihakemistoon public_html -kansio komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdir ~/public_html_&lt;/code&gt;. Tilde, eli “~”-merkki tarkoittaa tässä siis kirjautuneen käyttäjän kotihakemistoa. Myöhemmin käyttäjien sivuja selattaessa tilde tarkoittaa, että ollaan jonkin käyttäjän kotisivuilla, eli käyttäjälle tehdyn public_html -kansion sisällä. Esimerkiksi “http://localhost/~käyttäjä”&lt;/p&gt;

&lt;h4 id=&quot;apache2--muutoksien-käyttöönotto-ja-toiminnan-varmistus&quot;&gt;Apache2 | Muutoksien käyttöönotto ja toiminnan varmistus&lt;/h4&gt;

&lt;p&gt;Käynnistetään ensin Apache2 -palvelin uudelleen, jotta kaikki muutokset tulevat voimaan. Palvelimen voi käynnistää uudelleen komennolla&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo service apache2 restart&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Varmistetaan Apachen -testisivun toiminta menemällä osoitteeseen http://localhost ja kotisivujen toiminta menemällä osoitteeseen http://localhost/~käyttäjänimi , omassa tapauksessani http://localhost/~k&lt;/p&gt;

&lt;p&gt;Tässä koko asennus giffinä!
&lt;img src=&quot;/img/apache2-asennus.gif&quot; alt=&quot;Apache2&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;b-apachen-ilmoittamat-statukset&quot;&gt;B) Apachen ilmoittamat statukset&lt;/h1&gt;

&lt;p&gt;Apachelle lähetettyihin pyyntöihin liittyvät lokimerkinnät löytyvät /var/log/apache2/access.log -polusta. Apache kirjoittaa lokiin Ubuntun oletuskonfiguraatiolla kaikki palvelimelle tehdyt pyynnöt ja niihin liittyvät metatiedot. &lt;a href=&quot;https://httpd.apache.org/docs/2.4/logs.html&quot;&gt;6&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;http-tilannekoodi-200--onnistunut-sivulataus&quot;&gt;HTTP tilannekoodi 200 | onnistunut sivulataus&lt;/h4&gt;

&lt;p&gt;Onnistuneen sivulatauksen lokimerkintään kuuluu, kuten kaikkiin access.log -tiedostoon oletuksena merkittäviin riveihin, sivua pyytäneen asiakkaan IP-osoite, aika, päivämäärä, palvelimen aikavyöhyke, pyynnön tyyppi, hakemisto, protokolla, HTTP-tilannekoodi, pyynnön koko ja tiedot käyttäjän selaimesta (User Agent).&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1 - - [12/Sep/2017:00:07:01 +0300] &quot;GET /~k/ HTTP/1.1&quot; 200 696 &quot;-&quot; &quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Oheisessa lokimerkinnässä kohdat tarkoittavat seuraavaa:&lt;/p&gt;

&lt;p&gt;Asiakkaan IP-osoite: 127.0.0.1, pyyntö tuli siis localhostilta eli samalta tietokoneelta.&lt;/p&gt;

&lt;p&gt;Päivämäärä, aika ja aikavyöhyke: [12/Sep/2017:00:07:01 +0300]&lt;/p&gt;

&lt;p&gt;Pyynnön sisältö: “GET /~k/ HTTP/1.1”, pyyntö käytti HTTP1.1 -protokollaa ja pyysi GET-pyynnöllä palvelimelta hakemistoa /~k/&lt;/p&gt;

&lt;p&gt;Pyynnön koko ja HTTP-tilannekoodi: 200 696, HTTP-tilannekoodi 200 kertoo onnistuneesta latauksesta ja luku 696 pyynnön koosta tavuina.&lt;/p&gt;

&lt;p&gt;Välittäjätieto tulisi “-“ kohdassa väliviivan tilalle, mutta koska tässä tapauksessa asiakas pyysi suoraan hakemistoa /~k/ eikä tullut esimerkiksi linkin kautta ei lokimerkintä ole viivaa rikkaampi.&lt;/p&gt;

&lt;p&gt;Viimeisenä kerrotaan käyttäjän tietoja User Agentin muodossa: “Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0”, Käyttäjä tuli sivulle siis käyttäen selaimella joka mainostaa itseään Mozilla/5.0 yhteensopivana. Käyttäjällä oli käytössä 64 bittinen todennäköisesti graafisella ympäristöllä toimiva (X11) Ubuntu. User Agent kertoo vielä myös Firefoxin tarkan version (Firefox/55.0) sekä sen käyttämän selainmoottorin version (Gecko/20100101).&lt;/p&gt;

&lt;h4 id=&quot;http-tilannekoodi-404--sivua-ei-löytynyt&quot;&gt;HTTP tilannekoodi 404 | sivua ei löytynyt&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;::1 - - [12/Sep/2017:00:10:40 +0300] &quot;GET /~k/blog/ HTTP/1.1&quot; 404 498 &quot;-&quot; &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/62.0.3202.9 Chrome/62.0.3202.9 Safari/537.36&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;404 -tilannekoodin kanssa suurimpana erona oli käyttämäni selain Chromium.&lt;/p&gt;

&lt;p&gt;Asiakkaan IP-osoite: ::1, pyyntö tuli siis localhostilta (IPv6) eli samalta tietokoneelta.&lt;/p&gt;

&lt;p&gt;Päivämäärä, aika ja aikavyöhyke: [13/Sep/2017:00:10:40 +0300]&lt;/p&gt;

&lt;p&gt;Pyynnön sisältö: “GET /~k/blog/ HTTP/1.1”, pyyntö käytti HTTP1.1 -protokollaa ja pyysi GET-pyynnöllä palvelimelta hakemistoa /~k/blog/&lt;/p&gt;

&lt;p&gt;Pyynnön koko ja HTTP-tilannekoodi: 404 498, HTTP-tilannekoodi 404 kertoo sivulatauksesta, jota ei löytynyt asiakkaan pyytämästä hakemistosta ja luku 498 pyynnön koosta tavuina.&lt;/p&gt;

&lt;p&gt;Välittäjätieto tulisi “-“ kohdassa väliviivan tilalle, mutta koska tässä tapauksessa asiakas pyysi suoraan hakemistoa /~k/blog/ eikä tullut esimerkiksi linkin kautta ei lokimerkintä ole viivaa rikkaampi.&lt;/p&gt;

&lt;p&gt;Viimeisenä kerrotaan käyttäjän tietoja User Agentin muodossa: “Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/62.0.3202.9 Chrome/62.0.3202.9 Safari/537.36”, Käyttäjä tuli sivulle siis käyttäen selaimella joka mainostaa itseään Mozilla/5.0 yhteensopivana. Käyttäjällä oli käytössä 64 bittinen todennäköisesti graafisella ympäristöllä toimiva (X11) Linux. User Agent kertoo vielä myös Chromiumin tarkan version (Ubuntu Chromium/62.0.3202.9) sekä sen käyttämän selainmoottorin version (AppleWebKit/537.36 (KHTML, like Gecko)).&lt;/p&gt;

&lt;h1 id=&quot;d-apachen-konfigurointivirhe--open-xchange&quot;&gt;D) Apachen konfigurointivirhe | Open-Xchange&lt;/h1&gt;

&lt;p&gt;Olen noin vuoden ajan ajanut omalla palvelimellani Open-Xchange-nimistä groupware-sovellusta. &lt;a href=&quot;https://fi.wikipedia.org/wiki/Ryhm%C3%A4ty%C3%B6sovellus&quot;&gt;2&lt;/a&gt; Sovellus pyrkii etenkin nykypäivänä olemaan vastine Googlen ja Microsoftin tarjoamille yhdistelmäpalveluille, jotka ovat saaneet alun hyvin nettiselaimessa toimivan sähköpostiohjelman luomisesta. Open-Xchange on vahvasti sähköpostiin perustuva, eikä se sellaisenaan toimi ilman sähköpostipalvelinta. Suurinosa Open-Xchangen komponenteista on avoimeen lähdekoodiin perustuvia, mutta sovellukseen on kuitenkin saatavilla monia lisäosia, joita varten tarvitaan ainakin maksullisia lisenssejä. Olen myös ottanut omalla palvelimellani käyttöön Nextcloudin, jossa on hyvin monia samankaltaisia ominaisuuksia kuin Open-Xchangessa. Kummassakin sovelluksessa on kuitenkin hyvät ja huonot puolensa ja etenkin sähköposti- ja toimistokäytössä Open-Xchange vaikuttaa tällä hetkellä paremmalta.&lt;/p&gt;

&lt;p&gt;Päätin ottaa esimerkiksi Open-Xchangen, sillä juuri pariviikkoa aikaisemmin se oli taas lopettanut toimintansa. Yleensä päivitän kaikki palvelimen paketit lähes heti kun ne tulevat saataville. Open-Xchange:lla on tapana päivittyä usein ja yleensä päivityksillä on tapana aiheuttaa ongelmia Open-Xchangen toimivuuteen Apachen kanssa. Ongelmat liittyvät Open-Xchangen Apacheen tarkoitettuun proxy_http -konfigurointitiedostoon, joka on siis  Apachelle tarkoitettu reverse proxy*, joka välittä Open-Xchangen käyttöliittymän eteenpäin. &lt;a href=&quot;https://oxpedia.org/wiki/index.php?title=AppSuite:Open-Xchange_Installation_Guide_for_Debian_8.0#Configure_services&quot;&gt;1&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Reverse proxy tarkoittaa välityspalvelinta, joka piilottaa yleensä palvelimella sijaitsevan sovelluksen taustapalvelut taakseen ja välittää näin tietoa palvelimen tai verkon sisältä ikään kuin se tulisi samalta palvelimelta.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;virheilmoitus--open-xchange&quot;&gt;Virheilmoitus | Open-Xchange&lt;/h4&gt;

&lt;p&gt;Apache käynnistyy Open-Xchangen oletusasennusohjeiden mukaisella konfiguraatiolla ongelmitta. Kuitenkin viimeisimmän Open-Xchangen päivityksen jälkeen sain seuraavanlaista virhettä Apachen error.log -lokitiedostoon, jonka löytää polusta /var/log/apache2/error.log&lt;/p&gt;

&lt;p&gt;Ensimmäisellä rivillä Apache kertoo klo 23:06 tapahtuneesta välityspalvelin (proxy) modulin virheestä Apachen prosessissa 17653 . &lt;em&gt;(111)Connection refused: AH00957:&lt;/em&gt; , kertoo kuinka Apachen proxy-liitännäinen worker ei onnistunut yhdistämään konfiguroinnin (proxy_http.conf)  mukaiseen osoitteeseen, koska yhteys kiellettiin. AH00957 on ilmeisimmin proxy-liitännäisen virhekoodi &lt;em&gt;connection refused&lt;/em&gt; -sanomalle. Viimeinen osa lokimerkintää kertoo protokollan (HTTP) ja portin (IPv4/IPv6 portti 8009), jolla proxy-moduuli yritti yhdistää paikalliseen (localhost&lt;em&gt;) palvelimeen.&lt;/em&gt;HTTP: attempt to connect to [::1]:8009 (localhost) failed*&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[Wed Sep 11 23:06:01.257436 2017] [proxy:error] [pid 17653] (111)Connection refused: AH00957: HTTP: attempt to connect to [::1]:8009 (localhost) failed&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Seuraavalla rivillä Apachen saman proxy-moduulin funktio &lt;em&gt;ap_proxy_connect_backend&lt;/em&gt; kertoo poistavansa modulin workerin käytöstä konfigurointitiedostossa määritellylle osoitteelle &lt;em&gt;localhost&lt;/em&gt;. Myös 60s “katkaisuaika” on määritelty konfigurointitedostoon. (proxy_http.conf)&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[Wed Sep 11 23:06:01.297297 2017] [proxy:error] [pid 17653] AH00959: ap_proxy_connect_backend disabling worker for (localhost) for 60s&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Viimeisellä rivillä kerrotaan koko tapahtuman lopputulema pyynnön aloittaneen asiakkaan &lt;em&gt;84.248.1.11&lt;/em&gt; osoitetta myöden. Lokimerkinnässä näkyy myös HTTP-asiakasportti 44508. Jälleen AH -alkuinen AH01114 -virhekoodi vaikuttaa olevan Apachen mod_proxy -liitännäisen virhekoodi &lt;em&gt;failed to make connection to backend&lt;/em&gt; -sanomalle. mod_proxy -liitännäinen ei siis onnistunut yhdistämään localhostilla sijaitsevaan taustapalveluun “backend”. Viimeisimpänä lokirivillä kerrotaan mistä osoitteesta virhe on saanut alkunsa. Kyseessä on juuri Open-Xchange -ympäristön etusivu, joka tässä merkinnässä oli osoitteessa &lt;em&gt;https://example.com/appsuite/&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[Wed Sep 11 23:06:01.297388 2017] [proxy_http:error] [pid 17653] [client 84.248.1.11:44508] AH01114: HTTP: failed to make connection to backend: localhost, referer: https://example.com/appsuite/&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&quot;e--phpmyadmin&quot;&gt;E)  phpMyAdmin&lt;/h1&gt;

&lt;p&gt;Tämä tehtävä on tehty LAMP-asennuksen MySQL:n ja PHP:n testaus -kohdassa &lt;a href=&quot;#mysql-ja-php-testaus--phpmyadmin&quot;&gt;PhpMyAdmin&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;j-lamp--asennus&quot;&gt;J) LAMP -asennus&lt;/h1&gt;

&lt;p&gt;Ubuntulla LAMP-asennus on helppo tehdä, sillä kaikki vaadittavat paketit löytyvät oletusohjelmavarastoista. Kaikki ohjelmat ovat myös lisensoitu avoimen lähdekoodin määrityksen mukaisilla (FSF[]) lisensseillä, joskin vain MySQL on GPL2 lisensoitu. Apache &lt;a href=&quot;https://github.com/apache/httpd/blob/trunk/LICENSE&quot;&gt;4&lt;/a&gt; ja PHP &lt;a href=&quot;http://php.net/license/&quot;&gt;5&lt;/a&gt; käyttävät kummatkin omia lisenssejään. Sekä Apache että PHP -lisenssit ovat BSD tai MIT -tyyppisiä lisenssejä, jotka eivät sisällä rajoituksia koodin käyttämiselle suljetun lähdekoodin sovellutuksissa.&lt;/p&gt;

&lt;p&gt;LAMP-asennuksen voi suorittaa komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install lamp-server^&lt;/code&gt; (&lt;code class=&quot;highlighter-rouge&quot;&gt;^&lt;/code&gt; on tärkeä)&lt;/p&gt;

&lt;p&gt;Komento on sama, joka ajetaan jos LAMP-palvelin valitaan asennettavaksi Ubuntun asennuksen yhteydessä. &lt;a href=&quot;https://help.ubuntu.com/community/ApacheMySQLPHP&quot;&gt;3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ainoa käyttäjältä vaadittava toimenpide on vahvan pääkäyttäjän salasanan valitseminen MySQL-palvelimelle. Yksi luotettavimmista tavoista luoda vahva salasana on käyttää APG:ta. &lt;a href=&quot;https://help.ubuntu.com/community/StrongPasswords#Generating_Strong_Passwords_in_Ubuntu&quot;&gt;7&lt;/a&gt; APG:n asentaminen onnistuu komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install apg&lt;/code&gt; , jonka jälkeen vahvoja salasanoja voi luoda vain suorittamalla apg-komennon.&lt;/p&gt;

&lt;p&gt;Valittuasi vahvan salasanan ja kirjoitettuasi (tai kopioituasi sen asennusikkunaan ja talteen) asennus valmistuu.&lt;/p&gt;

&lt;h4 id=&quot;apache2-testaus-&quot;&gt;Apache2 testaus |&lt;/h4&gt;

&lt;p&gt;Apache voidaan testata menemällä paikalliseen osoitteeseen http://localhost/&lt;/p&gt;

&lt;h4 id=&quot;mysql-ja-php-testaus--phpmyadmin&quot;&gt;MySQL ja PHP testaus | phpMyadmin&lt;/h4&gt;

&lt;p&gt;Ehkä helpoin tapa testata kummatkin on asentaa phpMyAdmin. phpMyAdmin käyttää sekä php:ta että MySQL-tietokantaa toimiakseen.&lt;/p&gt;

&lt;p&gt;Myös phpMyAdmin voidaan asentaa Ubuntussa oletuksena löytyvistä ohjelmavarastoista komennolla &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apt-get install phpmyadmin&lt;/code&gt;
Asennus pyytää antamaan MySQL:lle pääkäyttäjän salasanan, joka on määritelty asennettaessa mysql-server -pakettia LAMP:n asennuksen yhteydessä.&lt;/p&gt;

&lt;p&gt;Ubuntun ohjelmavarastoista löytyvä phpMyAdmin -paketti asentaa itselleen automaattisesti oman virtualhost -konfiguroinnin, jonka seurauksena phpMyAdminin hallintapaneeliin pääsee osoitteesta http://localhost/phpmyadmin&lt;/p&gt;

&lt;p&gt;Ohessa jälleen phpMyAdminin asennus ja siten myös MySQL:n ja PHP:n testaus giffinä.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/phpmyadmin.gif&quot; alt=&quot;PHP &amp;amp; MySQL &amp;amp; phpMyAdmin&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;lähteet-&quot;&gt;Lähteet |&lt;/h3&gt;

&lt;p&gt;[1: https://oxpedia.org/wiki/index.php?title=AppSuite:Open-Xchange_Installation_Guide_for_Debian_8.0#Configure_services&lt;/p&gt;

&lt;p&gt;[2: https://fi.wikipedia.org/wiki/Ryhm%C3%A4ty%C3%B6sovellus&lt;/p&gt;

&lt;p&gt;[3: https://help.ubuntu.com/community/ApacheMySQLPHP&lt;/p&gt;

&lt;p&gt;[4: https://github.com/apache/httpd/blob/trunk/LICENSE&lt;/p&gt;

&lt;p&gt;[5: http://php.net/license/&lt;/p&gt;

&lt;p&gt;[6: https://httpd.apache.org/docs/2.4/logs.html&lt;/p&gt;

&lt;p&gt;[7: https://help.ubuntu.com/community/StrongPasswords#Generating_Strong_Passwords_in_Ubuntu&lt;/p&gt;</content><author><name></name></author><category term="linux" /><category term="haaga-helia" /><category term="koulu" /><category term="infra" /><category term="such" /><category term="wow" /><category term="test" /><category term="tags" /><summary type="html">Sisältö |</summary></entry><entry><title type="html">Linux palvelimet ICT4TN021 2017 H2</title><link href="http://0.0.0.0:8080/2017/09/04/Linux-Palvelimet-H2.html" rel="alternate" type="text/html" title="Linux palvelimet ICT4TN021 2017 H2" /><published>2017-09-04T00:00:00+00:00</published><updated>2017-09-04T00:00:00+00:00</updated><id>http://0.0.0.0:8080/2017/09/04/Linux-Palvelimet-H2</id><content type="html" xml:base="http://0.0.0.0:8080/2017/09/04/Linux-Palvelimet-H2.html">&lt;h1 id=&quot;h2-298-komennot--lokimerkinnät&quot;&gt;H2 29.8 Komennot &amp;amp; lokimerkinnät&lt;/h1&gt;
&lt;p&gt;========================&lt;/p&gt;

&lt;h1 class=&quot;no_toc&quot; id=&quot;sisältö&quot;&gt;Sisältö&lt;/h1&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#h2-298-komennot--lokimerkinnät&quot; id=&quot;markdown-toc-h2-298-komennot--lokimerkinnät&quot;&gt;H2 29.8 Komennot &amp;amp; lokimerkinnät&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#tehtävänanto-&quot; id=&quot;markdown-toc-tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#a-lokitapahtumat--fail2ban&quot; id=&quot;markdown-toc-a-lokitapahtumat--fail2ban&quot;&gt;A) Lokitapahtumat | Fail2Ban&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#fail2ban--onnistunut-uudelleenkäynnistys&quot; id=&quot;markdown-toc-fail2ban--onnistunut-uudelleenkäynnistys&quot;&gt;Fail2Ban | Onnistunut uudelleenkäynnistys&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#fail2ban--iptables-onnistunut-kirjautumisten-estäminen&quot; id=&quot;markdown-toc-fail2ban--iptables-onnistunut-kirjautumisten-estäminen&quot;&gt;Fail2Ban &amp;amp; IpTables| Onnistunut kirjautumisten estäminen&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#b-ssh-daemon&quot; id=&quot;markdown-toc-b-ssh-daemon&quot;&gt;B) SSH-Daemon&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ssh--github--jekyll&quot; id=&quot;markdown-toc-ssh--github--jekyll&quot;&gt;SSH | Github | Jekyll&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#c-kaikenkattava-komento-ohjelmien-asentamiseen&quot; id=&quot;markdown-toc-c-kaikenkattava-komento-ohjelmien-asentamiseen&quot;&gt;C) Kaikenkattava komento ohjelmien asentamiseen&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ohjelmat-&quot; id=&quot;markdown-toc-ohjelmat-&quot;&gt;Ohjelmat |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#palvelinten-ja-tietokoneiden-ylläpitoon-tarkoitetut-ohjelmat-&quot; id=&quot;markdown-toc-palvelinten-ja-tietokoneiden-ylläpitoon-tarkoitetut-ohjelmat-&quot;&gt;Palvelinten ja tietokoneiden ylläpitoon tarkoitetut ohjelmat |&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#tarvittavat-lisäohjelmavarastot-&quot; id=&quot;markdown-toc-tarvittavat-lisäohjelmavarastot-&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#työpöytäohjelmat-&quot; id=&quot;markdown-toc-työpöytäohjelmat-&quot;&gt;Työpöytäohjelmat |&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#tarvittavat-lisäohjelmavarastot--1&quot; id=&quot;markdown-toc-tarvittavat-lisäohjelmavarastot--1&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#guin-vaativat-muut-kuin-työpöytäohjelmat-&quot; id=&quot;markdown-toc-guin-vaativat-muut-kuin-työpöytäohjelmat-&quot;&gt;GUI:n vaativat muut kuin työpöytäohjelmat |&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#tarvittavat-lisäohjelmavarastot--2&quot; id=&quot;markdown-toc-tarvittavat-lisäohjelmavarastot--2&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#koko-komento-&quot; id=&quot;markdown-toc-koko-komento-&quot;&gt;Koko komento |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#d-komentorivillä-toimivat-ohjelmat-1&quot; id=&quot;markdown-toc-d-komentorivillä-toimivat-ohjelmat-1&quot;&gt;D) Komentorivillä toimivat ohjelmat &lt;a href=&quot;https://kkovacs.eu/cool-but-obscure-unix-tools/&quot;&gt;1&lt;/a&gt;&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#dtrx-2--do-the-right-extraction&quot; id=&quot;markdown-toc-dtrx-2--do-the-right-extraction&quot;&gt;dtrx &lt;a href=&quot;https://brettcsmith.org/2007/dtrx/&quot;&gt;2&lt;/a&gt; | “Do The Right Extraction”&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#mtr--mtr-tiny-3--traceroute--ping-20&quot; id=&quot;markdown-toc-mtr--mtr-tiny-3--traceroute--ping-20&quot;&gt;mtr / mtr-tiny &lt;a href=&quot;https://github.com/traviscross/mtr&quot;&gt;3&lt;/a&gt; | Traceroute &amp;amp; ping “2.0”&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ipcalc-4--verkko-osoitelaskuri&quot; id=&quot;markdown-toc-ipcalc-4--verkko-osoitelaskuri&quot;&gt;ipcalc &lt;a href=&quot;https://github.com/nmav/ipcalc&quot;&gt;4&lt;/a&gt; | Verkko-osoitelaskuri&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#lähteet-&quot; id=&quot;markdown-toc-lähteet-&quot;&gt;Lähteet |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tehtävänanto-&quot;&gt;Tehtävänanto |&lt;/h3&gt;

&lt;p&gt;Tehtävänanto on osa Tero Karvisen Haaga-Heliassa suoritettavaa Linux-kurssia. http://terokarvinen.com/2017/aikataulu-linux-palvelimet-ict4tn021-4-ti-ja-5-to-alkusyksy-2017-5-op&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;a) Aiheuta lokiin kaksi eri tapahtumaa: yksi esimerkki onnistuneesta ja yksi esimerkki epäonnistuneesta tai kielletystä toimenpiteestä. Analysoi rivit yksityiskohtaisesti.&lt;/p&gt;

  &lt;p&gt;b) Vapaaehtoinen kohta, ei ole opetettu vielä: Asenna SSH-demoni. Kokeile omalla ssh-palvelimellasi jotain seuraavista: ssh-copy-id, sshfs, scp tai git. (Helpoin lienee scp: ‘scp foo.txt tero@example.com:’)&lt;/p&gt;

  &lt;p&gt;c) Tee unelmien apt-get -komento: yksi komentorivi, joka asentaa suosikkiohjelmasi.&lt;/p&gt;

  &lt;p&gt;d) Asenna komentokehotteen paketinhallinnasta kolme itsellesi uutta komentorivillä toimivaa ohjelmaa. Kokeile kutakin ohjelmaa sen pääasiallisessa käyttötarkoituksessa.&lt;/p&gt;

  &lt;p&gt;e) Opettele ulkoa ja harjoittele tärkeimmät komennot (tätä “opettele ulkoa” alakohtaa ei tarvitse raportoida):&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;a-lokitapahtumat--fail2ban&quot;&gt;A) Lokitapahtumat | Fail2Ban&lt;/h1&gt;

&lt;p&gt;Päätin käyttää lokien analysointi-tehtävässä Fail2Ban -ohjelmaa. Fail2Ban on suuniteltu estämään verkkohyökkäyksiä perustuun erilaisiin triggereihin. Yksinkertaisimillaan Fail2Ban estää Linuxin palomuurin avulla (iptables) esimerkiksi liian monta kertaa SSH:n väärällä tunnuksella tai salasanalla yhdistäneen IP-osoitteen määrätyksi ajaksi. Näin voidaan tehokkaasti estää ja ainakin huomattavasti hidastaa hyökkäyksiä, joissa yritetään kokeilla mahdollisimman montaa käyttäjätunnusta tai salasanaa kirjautumiseen.&lt;/p&gt;

&lt;h4 id=&quot;fail2ban--onnistunut-uudelleenkäynnistys&quot;&gt;Fail2Ban | Onnistunut uudelleenkäynnistys&lt;/h4&gt;

&lt;p&gt;Ubuntulle valmiina saatava Fail2Ban -paketti on hyvin helppo laittaa toimimaan SSH:n kanssa. Ohjelmapaketin mukana tulevassa ohjelmapaketissa on valmiina kaikki Fail2Banin SSH:n kanssa toimimiseen saattamiseksi vaadittavat konfiguroinnit. Fail2Ban lukee authlogia, josta se sitten määritellyn mukaisesti estää iptables:n avulla IP-osoitteen tai osoitteet.&lt;/p&gt;

&lt;p&gt;Varmistin jo olemassa olevan Fail2Banin toimivuuden ensin käynnistämällä Fail2Ban -daemonin uudelleen komennolla &lt;strong&gt;sudo service fail2ban restart&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Uudelleenkäynnistyksestä saamme lokiin (/var/syslog) seuraavat merkinnät:&lt;/p&gt;

&lt;p&gt;Ensimmäisellä rivillä, joka on päivätty 4 Syyskuuta klo 02 systemd, eli käytössä olevan Debian 9:n palveluiden tai daemonien hallintaohjelma, kertoo että se on pysäyttämässä Fail2Ban -palvelua.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:56 d systemd[1]: Stopping Fail2Ban Service...&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Fail2Ban -palvelun asiakasohjelma Fail2Ban-client ilmoittaa sekuntia myöhemmin sammuneensa onnistuneesti.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d fail2ban-client[27897]: Shutdown successful&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Systemd ilmoittaa suorittaneensa Fail2Ban -palvelun pysäytyksen onnistuneesti.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d systemd[1]: Stopped Fail2Ban Service.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Uudelleenkäynnistyksen seuraavassa vaiheessa Systemd kertoo seuraavaksi olevansa käynnistämässä Fail2Ban palvelua.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d systemd[1]: Starting Fail2Ban Service...&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Fail2Ban-asiakasohjelma prosessinumerolla 27923 kertoo käynnistävänsä Fail2Ban palvelinta fail2ban.server -prosessinimellä sekä numerolla 27924.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d fail2ban-client[27923]: 2017-09-04 02:01:57,477 fail2ban.server         [27924]: INFO    Starting Fail2ban v0.9.6&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Fail2Ban-asiakasohjelma kertoo Fail2Ban:in käynnistyvän daemon-tilassa.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d fail2ban-client[27923]: 2017-09-04 02:01:57,477 fail2ban.server         [27924]: INFO    Starting in daemon mode&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Systemd kertoo lopuksi Fail2Ban -palvelun käynnistyneen onnistuneesti.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Sep  4 02:01:57 d systemd[1]: Started Fail2Ban Service.&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;fail2ban--iptables-onnistunut-kirjautumisten-estäminen&quot;&gt;Fail2Ban &amp;amp; IpTables| Onnistunut kirjautumisten estäminen&lt;/h4&gt;

&lt;p&gt;Fail2Ban:in aktivoimiseksi kirjauduin omalle palvelimelleni viisi kertaa virheellisillä tunnuksilla. Tämän jälkeen Fail2Ban estää seuraavat kirjautumisyritykset kyseisestä IP-osoitteesta kymmenen minuutin ajaksi.&lt;/p&gt;

&lt;p&gt;Ensinäkin näemme /var/auth.log:ilta seuraavan viisi kertaa:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Sep  4 02:21:43 d sshd[15977]: pam_unix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssh ruser= rhost=85.76.7.100  user=x
Sep  4 02:21:45 d sshd[15945]: error: PAM: Authentication failure for x from 85.76.7.100
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Virheilmoituksessa sshd -daemon prosessinumerolla 15977 kertoo klo 02:21 epäonnistuneesta autentikoinnista käyttäjälle x, IP-osoitteesta 85.76.7.100. Autentikointi virhe on alunperin Linuxin PAM:n, eli Linuxin käyttäjien tunnistusjärjestelmän raportoima. SSH-palvelu yrittää siis kirjata käyttäjän sisään verraten käyttäjätunnusta ja salasanaa PAM:sta löytyviin tunnuksiin. Väärät tunnukset syötettäessä SSHd -daemon siis estää yhteyden avaamisen ja siitä syntyy lokimerkintä.&lt;/p&gt;

&lt;p&gt;Fail2Ban lukee jatkuvasti tätä /var/auth.log -tiedostoa, ja pystyy sen perusteella tekemään muutoksia iptables-palomuuriin, estäen logeissa esiintyvän IP-osoitteen. Fail2Banin logitiedostosta /var/log/fail2ban.log näemme onnistuneen eston lokimerkintänä:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2017-09-04 02:21:53,948 fail2ban.actions        [27926]: NOTICE  [sshd] Ban 85.76.7.126

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Fail2Ban:in oma logi siis kertoo fail2ban.actions -prosessinimellä ja numerolla 27926 toimineen prosessin estäneensä ‘Ban’ sshd-konfiguraatiolla määrätyn IP-osoitteen 85.76.7.126.&lt;/p&gt;

&lt;h1 id=&quot;b-ssh-daemon&quot;&gt;B) SSH-Daemon&lt;/h1&gt;

&lt;h4 id=&quot;ssh--github--jekyll&quot;&gt;SSH | Github | Jekyll&lt;/h4&gt;

&lt;p&gt;SSH-yhteyksien käyttäminen on itselle jo suhteellisen tuttua. Aikaisemmin käytin tiedostojen varmuuskopiointiin virtuaalipalvelinta ja käytin tarkoitukseen Baculaa, joka SSHFS:n avulla siirsi tiedostot.&lt;/p&gt;

&lt;p&gt;Kurssin yhteydessä ja tehtävien suositellun julkisen julkaisun vuoksi etsin itselle siihen tarkoitukseen parhaiten sopivan tavan. Mietin eri vahtoehtoja ja budjetti ja tietoturva edellä päädyin Githubin hostaukseen maksuttomuudesta ja luonnollisesta tietoturvasta johtuen. Maksuttomuus tulee ilmaisista repositoryjen ilmaisuudesta ja tietoturva vain HTML-sivujen julkaisun sallimisesta. Halusin kuitenkin käyttää jonkinlaista CMS-järjestelmää, ja ilman mahdollisuutta käyttää tietokantoja ja monimutkaisempaa ohjelmointia, päädyin Jekylliin. Tässä kohdassa siis näytän lyhyesti vain miten julkaisen sivut Githubiin Git -ohjelman avulla.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/git-jekyll.gif&quot; alt=&quot;alt text&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;c-kaikenkattava-komento-ohjelmien-asentamiseen&quot;&gt;C) Kaikenkattava komento ohjelmien asentamiseen&lt;/h1&gt;

&lt;h4 id=&quot;ohjelmat-&quot;&gt;Ohjelmat |&lt;/h4&gt;

&lt;p&gt;oracle-java7/8/9-installer adobe-flashplugin python python-pip git ruby-dev build-essential&lt;/p&gt;

&lt;h4 id=&quot;palvelinten-ja-tietokoneiden-ylläpitoon-tarkoitetut-ohjelmat-&quot;&gt;Palvelinten ja tietokoneiden ylläpitoon tarkoitetut ohjelmat |&lt;/h4&gt;

&lt;p&gt;xrdp htop openssh-server ssh bwm-ng aptitude dtrx mtr ipcalc&lt;/p&gt;

&lt;h5 id=&quot;tarvittavat-lisäohjelmavarastot-&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/h5&gt;
&lt;p&gt;Kaikki ohjelmat eivät löydy Ubuntun tai Debianin oletusohjelmavarastoista, joten joudut lisäämään niitä varten kolmansien osapuolien ylläpitämät ohjelmavarastot:&lt;/p&gt;

&lt;h4 id=&quot;työpöytäohjelmat-&quot;&gt;Työpöytäohjelmat |&lt;/h4&gt;

&lt;p&gt;chrome chromium skype spotify firefox teamviewer icaclient libreoffice qownnotes flux vlc transmission mosh filezilla openvpn&lt;/p&gt;

&lt;h5 id=&quot;tarvittavat-lisäohjelmavarastot--1&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/h5&gt;

&lt;p&gt;Kaikki ohjelmat eivät löydy Ubuntun tai Debianin oletusohjelmavarastoista, joten joudut lisäämään niitä varten kolmansien osapuolien ylläpitämät ohjelmavarastot:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo add-apt-repository ppa:pbek/qownnotes
sudo add-apt-repository ppa:saiarcot895/chromium-dev
sudo add-apt-repository ppa:nathan-renniewaldock/flux
sudo add-apt-repository ppa:nilarimogard/webupd8 
sudo add-apt-repository ppa:webupd8team/java
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Dropboxin ohjelmavaraston lisäämiseksi on tehtävä seuraavaa: https://www.dropbox.com/help/desktop-web/linux-repository&lt;/p&gt;

&lt;p&gt;Dropboxin ohjelmavaraston lisääminen /etc/apt/sources.list -tiedostoon: deb http://linux.dropbox.com/ubuntu natty main
Sekä Dropboxin ohjelmavaraston avaimen lisääminen apt:hen:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo deb http://linux.dropbox.com/ubuntu natty main | sudo tee /etc/apt/sources.list.d/dropbox.list

sudo apt-key adv --keyserver pgp.mit.edu --recv-keys 1C61A2656FB57B7E4DE0F4C1FC918B335044912E
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;guin-vaativat-muut-kuin-työpöytäohjelmat-&quot;&gt;GUI:n vaativat muut kuin työpöytäohjelmat |&lt;/h4&gt;
&lt;p&gt;grub-customizer winehq-devel remmina teamspeak gimp blueman steam(multiverse tarvitaan) cheese obs-studio&lt;/p&gt;

&lt;h5 id=&quot;tarvittavat-lisäohjelmavarastot--2&quot;&gt;Tarvittavat lisäohjelmavarastot |&lt;/h5&gt;
&lt;p&gt;Kaikki ohjelmat eivät löydy Ubuntun tai Debianin oletusohjelmavarastoista, joten joudut lisäämään niitä varten kolmansien osapuolien ylläpitämät ohjelmavarastot:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo add-apt-repository ppa:danielrichter2007/grub-customizer
sudo add-apt-repository ppa:materieller/teamspeak3
sudo add-apt-repository ppa:obsproject/obs-studio
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;koko-komento-&quot;&gt;Koko komento |&lt;/h4&gt;

&lt;p&gt;Lisätään ensin tarvittavat ohjelmavarastot:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo add-apt-repository ppa:pbek/qownnotes ppa:saiarcot895/chromium-dev ppa:nathan-renniewaldock/flux ppa:nilarimogard/webupd8 ppa:webupd8team/java ppa:danielrichter2007/grub-customizer ppa:materieller/teamspeak3 ppa:obsproject/obs-studio
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Asennetaan kaikki ohjelmat:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install oracle-java9-installer oracle-java8-installer adobe-flashplugin python python-pip git ruby-dev build-essential xrdp htop openssh-server ssh bwm-ng aptitude dtrx mtr ipcalc chrome chromium skype spotify firefox teamviewer icaclient libreoffice qownnotes flux vlc transmission mosh filezilla openvpn grub-customizer winehq-devel remmina teamspeak gimp blueman steam cheese obs-studio
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;d-komentorivillä-toimivat-ohjelmat-1&quot;&gt;D) Komentorivillä toimivat ohjelmat &lt;a href=&quot;https://kkovacs.eu/cool-but-obscure-unix-tools/&quot;&gt;1&lt;/a&gt;&lt;/h1&gt;

&lt;p&gt;Ubuntulla seuraavia ohjelmia varten ei tarvita erillisiä ohjelmavarastoja.&lt;/p&gt;

&lt;h4 id=&quot;dtrx-2--do-the-right-extraction&quot;&gt;dtrx &lt;a href=&quot;https://brettcsmith.org/2007/dtrx/&quot;&gt;2&lt;/a&gt; | “Do The Right Extraction”&lt;/h4&gt;

&lt;p&gt;Sovellus on tarkoitettu useiden eri pakkasuformaattien purkamiseen ilman kaikkien ohjelmien komentojen muistamista erikseen. Ohjelman luojan mukaan ohjelma purkaa tar, zip, cpio, deb, rpm, gem, 7z, cab, lzh, rar, gz, bz2, lzma, xz -tiedostot sekä useita exe -tiedostoja. Ohjelma pystyy purkamaan myös Microsoftin cab -tiedostoja, InstallShield -arkistoja ja itsestään purkautuvia zippejä.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/dtrx.gif&quot; alt=&quot;dtrx&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;mtr--mtr-tiny-3--traceroute--ping-20&quot;&gt;mtr / mtr-tiny &lt;a href=&quot;https://github.com/traviscross/mtr&quot;&gt;3&lt;/a&gt; | Traceroute &amp;amp; ping “2.0”&lt;/h4&gt;

&lt;p&gt;mtr on erityisesti verkkossa esiintyvien ongelmien, mutta myös reitityksien selvittämiseen tehty ohjelma. Ohjelma näyttää kätevästi kaiken sekä traceroute:lla että ping:llä (vasteaika ja pakettihäviö) saatavan tiedon samassa ikkunassa.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/mtr.gif&quot; alt=&quot;mtr&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;ipcalc-4--verkko-osoitelaskuri&quot;&gt;ipcalc &lt;a href=&quot;https://github.com/nmav/ipcalc&quot;&gt;4&lt;/a&gt; | Verkko-osoitelaskuri&lt;/h4&gt;

&lt;p&gt;Ohjelman nimen mukaisesti ipcalc on tarkoitettu laskemaan verkko-osoitteita esimerkiksi aliverkon peitteen perusteella.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/ipcalc.gif&quot; alt=&quot;ipcalc&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;lähteet-&quot;&gt;Lähteet |&lt;/h3&gt;

&lt;p&gt;[1: https://kkovacs.eu/cool-but-obscure-unix-tools/&lt;/p&gt;

&lt;p&gt;[2: https://brettcsmith.org/2007/dtrx/&lt;/p&gt;

&lt;p&gt;[3: https://github.com/traviscross/mtr&lt;/p&gt;

&lt;p&gt;[4: https://github.com/nmav/ipcalc&lt;/p&gt;</content><author><name></name></author><category term="linux" /><category term="haaga-helia" /><category term="koulu" /><category term="infra" /><category term="such" /><category term="wow" /><category term="test" /><category term="tags" /><summary type="html">H2 29.8 Komennot &amp;amp; lokimerkinnät ========================</summary></entry><entry><title type="html">Linux palvelimet ICT4TN021 2017 H1</title><link href="http://0.0.0.0:8080/2017/08/28/Linux-Palvelimet-H1.html" rel="alternate" type="text/html" title="Linux palvelimet ICT4TN021 2017 H1" /><published>2017-08-28T00:00:00+00:00</published><updated>2017-08-28T00:00:00+00:00</updated><id>http://0.0.0.0:8080/2017/08/28/Linux-Palvelimet-H1</id><content type="html" xml:base="http://0.0.0.0:8080/2017/08/28/Linux-Palvelimet-H1.html">&lt;h1 class=&quot;no_toc&quot; id=&quot;publish-h1-2282017-livetikku&quot;&gt;Publish H1 22.8.2017 ‘Livetikku’&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;Sivu on julkaistu ensimmäisen kerran 28.8.2017 ja&lt;/strong&gt; 
&lt;strong&gt;päivitetty 30.8.2017&lt;/strong&gt;&lt;/p&gt;

&lt;h1 class=&quot;no_toc&quot; id=&quot;sisältö&quot;&gt;Sisältö&lt;/h1&gt;

&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#tehtävänanto&quot; id=&quot;markdown-toc-tehtävänanto&quot;&gt;Tehtävänanto&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#a-boottaavan-linux-usb-tikun-luominen&quot; id=&quot;markdown-toc-a-boottaavan-linux-usb-tikun-luominen&quot;&gt;A) Boottaavan Linux USB-tikun luominen&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#kohde--asus-qm1--x5-z8300-soc&quot; id=&quot;markdown-toc-kohde--asus-qm1--x5-z8300-soc&quot;&gt;Kohde | Asus QM1 &amp;amp; x5-Z8300 SoC&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#asus-qm1--laitteen-käynnistys-live-cdltä-&quot; id=&quot;markdown-toc-asus-qm1--laitteen-käynnistys-live-cdltä-&quot;&gt;Asus QM1 -laitteen käynnistys live cd:ltä |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#usb-tikun-luonti--easy2boot&quot; id=&quot;markdown-toc-usb-tikun-luonti--easy2boot&quot;&gt;USB-tikun luonti | Easy2Boot&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#usb-tikun-luonti--linuxium-15&quot; id=&quot;markdown-toc-usb-tikun-luonti--linuxium-15&quot;&gt;USB-tikun luonti | Linuxium &lt;a href=&quot;https://linuxiumcomau.blogspot.com/2017/06/customizing-ubuntu-isos-documentation.html&quot;&gt;15&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#b-koneen-rauta-sudo-lshw--short--sanitize&quot; id=&quot;markdown-toc-b-koneen-rauta-sudo-lshw--short--sanitize&quot;&gt;B) Koneen rauta sudo lshw -short -sanitize&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#c-uusien-ohjelmien-testaus&quot; id=&quot;markdown-toc-c-uusien-ohjelmien-testaus&quot;&gt;C) Uusien ohjelmien testaus&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#neofetch-9--yksinkertainen-järjestelmä-ja-käyttöjärjestelmätietojen-näyttö&quot; id=&quot;markdown-toc-neofetch-9--yksinkertainen-järjestelmä-ja-käyttöjärjestelmätietojen-näyttö&quot;&gt;NeoFetch &lt;a href=&quot;https://github.com/dylanaraps/neofetch&quot;&gt;9&lt;/a&gt; | Yksinkertainen järjestelmä ja käyttöjärjestelmätietojen näyttö&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#peek-10--tehokas-ohjelma-gif-animoitujen-ruutukappausvideoiden-tekoon&quot; id=&quot;markdown-toc-peek-10--tehokas-ohjelma-gif-animoitujen-ruutukappausvideoiden-tekoon&quot;&gt;Peek &lt;a href=&quot;https://github.com/phw/peek&quot;&gt;10&lt;/a&gt; | Tehokas ohjelma GIF-animoitujen ruutukappausvideoiden tekoon&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#undistract-me-11--ilmoitus-pitkien-komentojen-loppumisesta&quot; id=&quot;markdown-toc-undistract-me-11--ilmoitus-pitkien-komentojen-loppumisesta&quot;&gt;undistract-me &lt;a href=&quot;https://github.com/jml/undistract-me&quot;&gt;11&lt;/a&gt; | Ilmoitus pitkien komentojen loppumisesta&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#d-ohjelmistojen-lisenssit&quot; id=&quot;markdown-toc-d-ohjelmistojen-lisenssit&quot;&gt;D) Ohjelmistojen lisenssit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#e-linuxilla-käyttämäni-ohjelmat&quot; id=&quot;markdown-toc-e-linuxilla-käyttämäni-ohjelmat&quot;&gt;E) Linuxilla käyttämäni ohjelmat&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#nettiselain-&quot; id=&quot;markdown-toc-nettiselain-&quot;&gt;Nettiselain |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#tekstinkäsittely--toimistosovellukset-&quot; id=&quot;markdown-toc-tekstinkäsittely--toimistosovellukset-&quot;&gt;Tekstinkäsittely &amp;amp; toimistosovellukset |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#media-musiikki-videot-&quot; id=&quot;markdown-toc-media-musiikki-videot-&quot;&gt;Media, musiikki, videot |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#pelaaminen-&quot; id=&quot;markdown-toc-pelaaminen-&quot;&gt;Pelaaminen |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#työpöydän-etäohjaus-järjestelmäriippumaton-&quot; id=&quot;markdown-toc-työpöydän-etäohjaus-järjestelmäriippumaton-&quot;&gt;Työpöydän etäohjaus (järjestelmäriippumaton) |&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#lähteet-&quot; id=&quot;markdown-toc-lähteet-&quot;&gt;Lähteet |&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tehtävänanto&quot;&gt;Tehtävänanto&lt;/h3&gt;

&lt;p&gt;Tehtävänanto on osa Tero Karvisen Haaga-Heliassa suoritettavaa Linux-kurssia. http://terokarvinen.com/2017/aikataulu-linux-palvelimet-ict4tn021-4-ti-ja-5-to-alkusyksy-2017-5-op&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;a) Tee oma Linux-livetikku. Kokeile sitä jossain muussa kuin koulun koneessa. Tämä kohta ei edellytä asentamista – jos kuitenkin asennat, ota ensin varmuuskopiot.&lt;/p&gt;

  &lt;p&gt;b) Listaa testaamasi koneen rauta (‘sudo lshw -short -sanitize’).&lt;/p&gt;

  &lt;p&gt;c) Asenna kolme itsellesi uutta ohjelmaa. Kokeile kutakin ohjelmaa sen pääasiallisessa käyttötarkoituksessa.&lt;/p&gt;

  &lt;p&gt;d) Mitä lisenssiä kukin näistä ohjelmista käyttää? Selitä lyhyesti, mitä oikeuksia ja velvolisuuksia tuosta lisenssistä seuraa.&lt;/p&gt;

  &lt;p&gt;d-&amp;gt;e) Listaa käyttämäsi ohjelmat (esim. MS Word), kunkin ohjelman käyttötarkoitus (esim. Tekstinkäsittely) ja vastaava vapaa Linux-ohjelma (esim. LibreOffice Writer). Jos johonkin tarkoitukseen ei löydy vapaata Linux-ohjelmaa, listaa sekin.&lt;/p&gt;

  &lt;p&gt;f) Vapaaehtoinen lisätehtävä: varmuuskopioi tiedostosi (voit käyttää esimerkiksi ulkoista USB-levyä)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;a-boottaavan-linux-usb-tikun-luominen&quot;&gt;A) Boottaavan Linux USB-tikun luominen&lt;/h1&gt;

&lt;h4 id=&quot;kohde--asus-qm1--x5-z8300-soc&quot;&gt;Kohde | Asus QM1 &amp;amp; x5-Z8300 SoC&lt;/h4&gt;
&lt;p&gt;Päätin ottaa tässä kohtaa luonnollisesti yhden haastavimmista kohteista Linuxin pyörittämiseen. Käytössä on siis viimeisin (2017) versio QM1 tikusta x5-z8300 SoC:lla. Olen aikaisemminkin yrittänyt saada Asuksen QM1 - ‘PC-Tikkuun’ Linuxin asennettua.  En kuitenkaan tähän asti ole siinä onnistunut. Laitteessa on ilmeisesti samankaltainen UEFI BIOS muiden vastaavien Asuksen Atom ja Windows -pohjaisten halpojen kannattavien, tablettien ja jopa puhelimien kanssa. Kaikissa näissä laitteissa tulee mukana oletusarvoisesti Windows 8 tai Windows 10. Kyseinen PC-tikku pohjautuu ja muistuttaa hyvin vahvasti Intelin vastaavaa laitetta, mutta hieman ominaisuuksista riisuttuna. Näistä merkitsevimpinä toisen USB -liitännän (USB3) puuttuminen. &lt;a href=&quot;https://www.asus.com/fi/Stick-PCs/QM1/specifications/&quot;&gt;1&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;asus-qm1--laitteen-käynnistys-live-cdltä-&quot;&gt;Asus QM1 -laitteen käynnistys live cd:ltä |&lt;/h4&gt;
&lt;p&gt;Laitteen pitäisi käynnistyä UEFI-valikkoon ESC-näppäimellä, missään ei kuitenkaan varsinaisesti kerrottu missä tai miten tätä nappia pitäisi painaa, joten yleensä helpoin tapa päästä laitteen UEFI-valikkoon on käynnistää Windows uudestaan painamalla shift näppäintä valitessa “käynnistä uudelleen” tai “restart” vaihtoehtoa. Näin päästään tämän näköiseen valikkoon:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/w8uefirecovery.jpg&quot; alt=&quot;Windows 10 Recovery -valikko&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Myöhemmin myös itselle selvisi että ESC-nappia voi painaa pohjassa. Kaikki valinnat vievät lopulta samaan Asuksen UEFI-valikkoon, joka näyttää samalta kuin kohdassa &lt;a href=&quot;#usb-tikun-luonti--easy2boot&quot;&gt;USB-tikun luonti | Easy2Boot&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;usb-tikun-luonti--easy2boot&quot;&gt;USB-tikun luonti | Easy2Boot&lt;/h4&gt;

&lt;p&gt;Yleensä boottaavien USB-tikkujen asentamiseen olen tottunut käyttämään YUMI:a https://www.pendrivelinux.com/yumi-multiboot-usb-creator/ Aikaisempien huonojen kokemuksien johdosta etsin Googlella seuraavia vaihtoehtoja. Jotkut väittivät kaiken toimineen ilman ongelmia ‘tavallisin’ keinoin. Ainakin yksi &lt;a href=&quot;https://www.linuxquestions.org/questions/linux-hardware-18/asus-stick-pc-qm1-4175574279/#post5656074&quot;&gt;2&lt;/a&gt; oli maininnut Easy2Boot:n käytön. Olen joskus aikasemminkin käyttänyt samaa ohjelmaa kokeillessa erilaisia Windowsilla USB-tikkujen luontiin soveltuvia ohjelmia. Koko sovelluksen kätevin ominaisuus onkin varmaan se että siinä on eräänlainen oma bootloader, joka mahdollistaa pelkkien iso-tiedostojen lataamisen muistikortille. Etenkin hitailla muistikorteilla tämä säästää aikaa, kun kaikkia pieniä tiedostoja ei tarvitse purkaa erikseen.&lt;/p&gt;

&lt;p&gt;Asensin E2B:n ensin USB-tikulle… Sitten USB-hubin kanssa säätäessä muistin juuri sen toisen USB-paikan puuttumisen laitteestani. USB-hubin läpi en luonnollisesti saanut USB-tikkua boottaamaan. Suoraan USB-tikun liittäminen laitteeseen ei myöskään paljon edistä asiaa, sillä sitten laitteeseen ei voi enää liittää näppäimistöä.&lt;/p&gt;

&lt;p&gt;Seuraavaksi asensin E2B:n siis MicroSD-kortille ja kokeilin bootata laitteen sen kautta. – Ei löytynyt sen paremmin mitään boottivalikosta.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/qm1bootmenu.jpg&quot; alt=&quot;Asus QM-1 UEFI-valikko&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/emptybootmanager.jpg&quot; alt=&quot;Asus QM-1 tyhjää täynnä oleva boot-valikko&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/bootx64.efi.jpg&quot; alt=&quot;Asus QM-1 UEFI-valikko&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Viimeisenä vaihtoehtona laitteen UEFI -valikossa on vielä “Boot from file”.. Tätä kautta voi selata Windowsin BOOT-osiolle josta löytyy .efi -päätteinen tiedosto, jonka kautta saa laitteelle esiasennetun Windowsin päälle. Tätä kautta muistinkin että vastaavanlainen tiedosto pitäisi löytyä myös Ubuntun live-cd isosta. Pienen Googletuksen jälkeen löysin mahdollisesti oikeille jäljille vievän ohjeen. https://askubuntu.com/questions/395879/how-to-create-uefi-only-bootable-usb-live-media&lt;/p&gt;

&lt;p&gt;Koska olin jo samasta microsd-kortista tehnyt boottaavan, ei seuraava vaihe vaatinut kuin ISO-tiedoston tiedostojen purkamisen ja siirtämisen sille. Huomiona tosin se, että E2B formatoi muistitikun oletuksena NTFS -formaattiin ja Asuksen UEFI-bios lukee FAT32 -tiedostojärjestelmiä.&lt;/p&gt;

&lt;p&gt;Kuten kuitenkin aikaisemminkin, ei laite suostu boottaamaan tälläkään vaihtoehdolla vaan saan virheet \EFI\BOOT\BOOTx64.EFI boot failed. tai \EFI\BOOT\grubx64.efi boot failed. , riippuen kumpaa tiedostoa \BOOT -kansiossa yritän käyttää.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/bootx64.efi-boot-failed.jpg&quot; alt=&quot;Ei onnistu&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;usb-tikun-luonti--linuxium-15&quot;&gt;USB-tikun luonti | Linuxium &lt;a href=&quot;https://linuxiumcomau.blogspot.com/2017/06/customizing-ubuntu-isos-documentation.html&quot;&gt;15&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;En osaa varsinaisesti sanoa miksi en aikaisemmin ollut törmännyt “ainoaan viimeiseen vaihtoehtoon”, eli Linuxiumin isorespin.sh:n https://linuxiumcomau.blogspot.com/2017/06/customizing-ubuntu-isos-documentation.html Isorespinin ohjeissa tiivistetään QM1 -kaltaisten laitteen ongelmat, joka on siis 64-bittisten käyttöjärjestelmien boottaus ja asennus käyttäen 32-bittistä bootloaderia.. Mutta eipä onnistanut isorespinillä käyttäen Ubuntu Maten 16.04.3 -versiota. Tällä kertaa kuitenkin aikaisemmista kerroista eroavasti, tuli UEFI:n boottivalikkoon “Windows Boot Managerin” rinnalle uusi vaihtoehto “EFI SD/MMC Card”. Myös microSD-kortille puretun Ubuntu-asennuksen GRUB-valikkoon päästiin tälläkertaa. Nyt saatiin myös selvät virheilmoitukset!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/initramfs-pci-error.jpg&quot; alt=&quot;Kernelin virheilmoitukset&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Edit: Tässä päästiin siis lataamaan Ubuntua muistiin, sillä kyseessähän ovat Kernelin virheilmoitukset.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;intel_ish_ipc 0000:00:0a.0: [ishtp-ish]: Timed out waiting for FW&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;intel_ish_ipc 0000:00:0a.0: [ishtp-ish]: ISH: hw start failed.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;intel_ish_ipc 0000:00:0a.0: [ishtp-ish]: ISH: PCI driver initialization failed&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Tämän jälkeen Busyboxin perus ash shelli käynnistyy ja tulee vielä virhe: &lt;em&gt;(initramfs) Unable to find a medium containing a live file system.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Käytännössä Isorespinin GUI:n valinnoilla tehty komento, jolla ISO-tiedosto saatiin ohjelmalla tehtyä on samanlainen kuin esimerkissä:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;isorespin.sh -i ubuntu-17.04-desktop-amd64.iso -u -l rtl8723bs_4.12.0_amd64.deb -f linuxium-install-UCM-files.sh -f wrapper-linuxium-install-UCM-files.sh-c wrapper-linuxium-install-UCM-files.sh&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;b-koneen-rauta-sudo-lshw--short--sanitize&quot;&gt;B) Koneen rauta sudo lshw -short -sanitize&lt;/h1&gt;
&lt;p&gt;Koska en keksinyt Asuksen laitteen jälkeen mielenkiintoisempaakaan laitetta, niin kaivoin kaapin pohjalta yhden taannoin parhaiten Linux-tuetuista tietokoneista. Vuoden 2005 Thinkpad T43:n.
Komentoa &lt;strong&gt;sudo lshw -short -sanitize&lt;/strong&gt; -käyttäen saatiin seuraavat tiedot: … ja eipäs saatukkaan, sillä T43 ei käynnistynytkään enää uusimmalla Ubuntun versiolla vaan stoppasi ilmeisesti ennen GRUB:n avautumista kohtaan &lt;em&gt;Cannot find grldr&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Eli raudan paikalla on nyt siis X220, eli koulukoneeni tiedot: https://github.com/rkantos/rkantos.github.io/blob/master/Linux%20Palvelimet%202017-3/X220%20lshw&lt;/p&gt;

&lt;h1 id=&quot;c-uusien-ohjelmien-testaus&quot;&gt;C) Uusien ohjelmien testaus&lt;/h1&gt;

&lt;h4 id=&quot;neofetch-9--yksinkertainen-järjestelmä-ja-käyttöjärjestelmätietojen-näyttö&quot;&gt;NeoFetch &lt;a href=&quot;https://github.com/dylanaraps/neofetch&quot;&gt;9&lt;/a&gt; | Yksinkertainen järjestelmä ja käyttöjärjestelmätietojen näyttö&lt;/h4&gt;
&lt;p&gt;Tuleekin todennäköisesti tarpeeseen usein.. Useamman virtuaalipalvelimen kanssa ilman lxc:tä, Dockereita tai Kubernetejä tai mitään muuta monen palvelimen hallintaan tarkoitettua sovellusta unohtaa aina välillä mikä tarkka versio Ubuntusta tai Debianista olikaan käytössä. &lt;strong&gt;Uname -a&lt;/strong&gt; &amp;amp; &lt;strong&gt;lsb_release -a&lt;/strong&gt; komennoilla selviää Kernel ja distron versio. &lt;strong&gt;lscpu&lt;/strong&gt; komennolla selvittää prosessorin mallin ja tiedot, &lt;strong&gt;top:lla&lt;/strong&gt; ja &lt;strong&gt;htop:lla&lt;/strong&gt; selviää muistinkäyttö. NeoFetchillä selviää kuitenkin nämä kaikki ja vähän lisää.
NeoFetchin voi asentaa lisäämällä PPA:n:
sudo add-apt-repository ppa:dawidd0811/neofetch
sudo apt update
sudo apt install neofetch&lt;/p&gt;

&lt;h4 id=&quot;peek-10--tehokas-ohjelma-gif-animoitujen-ruutukappausvideoiden-tekoon&quot;&gt;Peek &lt;a href=&quot;https://github.com/phw/peek&quot;&gt;10&lt;/a&gt; | Tehokas ohjelma GIF-animoitujen ruutukappausvideoiden tekoon&lt;/h4&gt;
&lt;p&gt;Peek on erittäin helppokäyttöinen ja tehokas ohjelma pienien ruutukaappausvideoiden tekoon. Videot voi tehdä GIF, WebM tai mp4 -muotoon. Ensimmäinen on yhteensopiva melkein minkä tahansa selaimen kanssa (paitsi lynx tai links jne) ja WebM sekä mp4-videot toistuvat uusimmilla HTML5:sta tukevilla selaimilla ilman ongelmia.
Peekin voi asentaa Ubuntuun lisäämällä PPA:n:
Peekillä tälläisen luominen onnistui alle kahdessa minuutissa sovelluksen asentaminen mukaanlukien:
&lt;img src=&quot;/img/peek-testi.gif&quot; alt=&quot;Peek:n nopea testaus&quot; title=&quot;apt-get&quot; /&gt;&lt;/p&gt;

&lt;p&gt;sudo add-apt-repository ppa:peek-developers/stable
sudo apt update
sudo apt install peek&lt;/p&gt;

&lt;h4 id=&quot;undistract-me-11--ilmoitus-pitkien-komentojen-loppumisesta&quot;&gt;undistract-me &lt;a href=&quot;https://github.com/jml/undistract-me&quot;&gt;11&lt;/a&gt; | Ilmoitus pitkien komentojen loppumisesta&lt;/h4&gt;
&lt;p&gt;undistract-me:n tarkoitus on toimia komentokehoitteessa niin, että se havaitsee pitkään juoksevat komennot. Oletuksena undistract-me menee päälle kun jokin komento on pyörinyt kymmenen sekunnin ajan. Sovelluksen tarkoituksena on tehostaa työaikaa, sillä se ilmoittaa komennon suorituksen loppuneen. Näin voi käyttää muun ajan tehokkaasti vaikka seuraavan komennon etsimiseen ja jatkaa komentojen antamista heti edellisen loppumisen jälkeen, hukkaamatta aikaa komentokehoitteen tuijottamiseen.&lt;/p&gt;

&lt;p&gt;undistract-me löytyy suoraan Ubuntun ohjelmavarastosta ja sen voi asentaa suoraan komennolla:
sudo apt install undistract-me&lt;/p&gt;

&lt;h1 id=&quot;d-ohjelmistojen-lisenssit&quot;&gt;D) Ohjelmistojen lisenssit&lt;/h1&gt;
&lt;p&gt;NeoFetch käyttää MIT -lisenssiä, joka sallii sen muokkaamisen ja käyttämisen muualla, kunhan lisenssi on muokatussa lähdekoodissa mukana. MIT-lisenssiä voidaan käyttää myös suljetun lähdekoodin ohjelmistoissa. &lt;a href=&quot;https://www.sofokus.com/blogi/avoin-lahdekoodi/&quot;&gt;12&lt;/a&gt;
Peek on lisensoitu GPL:llä. GPL-lisenssi on Free Software Foundationin ylläpitämä lisenssi ja on täten täysin avoimien ohjelmistojen määritelmien mukainen. &lt;a href=&quot;https://www.gnu.org/philosophy/free-sw.html&quot;&gt;13&lt;/a&gt;
undistract-me käyttää Expat/MIT-lisenssiä, joka on yhteensopiva GPL:n kanssa. &lt;a href=&quot;https://www.gnu.org/licenses/license-list.html#Expat&quot;&gt;14&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;e-linuxilla-käyttämäni-ohjelmat&quot;&gt;E) Linuxilla käyttämäni ohjelmat&lt;/h1&gt;

&lt;h4 id=&quot;nettiselain-&quot;&gt;Nettiselain |&lt;/h4&gt;
&lt;p&gt;Windowsilla käytän luonnollisesti Chromea, kuten kuka tahansa Googlen palveluita käyttävä. Google vain tuntuu johtaneen kehitystä selaimissa jo lähes vuosikymmenen! Ubuntulle ja muille Distroille on toki saatavissa Chrome, mutta Chromium ainakin “yrittää” olla avoimeen lähdekoodiin perustuva. Suurin osa Chromiumin lähdekoodista on BSD- ja MIT-lisensseihin perustuvaa. Chromium on siinä mielessä hyvä että se sopii ainakin jonkinlaiseen “foliohattuiluun”, sillä oletuksena monet Googlen palveluihin nojaavat toiminnot eivät (2013 jälkeen &lt;a href=&quot;https://www.chromium.org/developers/how-tos/api-keys&quot;&gt;3&lt;/a&gt; ) ilman kikkailua enää toimi &lt;a href=&quot;https://askubuntu.com/questions/225930/how-do-i-get-the-latest-beta-and-development-version-of-chromium&quot;&gt;4&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;tekstinkäsittely--toimistosovellukset-&quot;&gt;Tekstinkäsittely &amp;amp; toimistosovellukset |&lt;/h4&gt;
&lt;p&gt;Omalla dualboot Ubuntu-kannettavalla käytän hyvin harvoin MS Wordiin verrattavissa olevia tekstinkäsittelyohjelmia. Pääosin käytänkin Nextcloudin kanssa hyvin yhteen pelaavaa &lt;strong&gt;QOwnNotesia, Google Docsia Chromiumilla, Katea&lt;/strong&gt; (KDE:n ylläpitämä Notepad++ tyyppinen tekstieditori) ja tietenkin komentokehotteessa &lt;strong&gt;Nanoa&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Kuvakaappauksien ottamiseen en ole Linuxille löytänyt vielä yhtä sulavasti ja hyvin toimivaa kuvakaappaus-ohjelmaa kuin &lt;strong&gt;Greenshot&lt;/strong&gt;. Greenshotilla voi nopeasti ottaa kuvan haluamastaan näytön kohdasta ja tallentaa sen haluammillaan ennalta määritellyillä asetuksilla. Greenshotissa on myös suoraan hyvin toimiva Imgur-latausvaihtoehto. Linuxilla käytän &lt;strong&gt;imgur-screenshot&lt;/strong&gt; -skriptiä &lt;a href=&quot;https://www.spotify.com/fi/download/linux/&quot;&gt;6&lt;/a&gt;, joka hoitaa ainakin Imgur-latauksen sulavasti, mutta pyörii muuten vain taustalla.&lt;/p&gt;

&lt;h4 id=&quot;media-musiikki-videot-&quot;&gt;Media, musiikki, videot |&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Spotify&lt;/strong&gt; on yleensä päällä ja pyörii suoraan Spotifyn omasta asiakasohjelmasta. &lt;a href=&quot;https://github.com/jomo/imgur-screenshot&quot;&gt;5&lt;/a&gt; Muut mediatiedostot toistan VLC:llä, oli ne sitten paikallisia tai verkosta striimattavia. Myös Windowsilla kaikki hoituu samoilla ohjelmilla, joskin Spotifysta on vielä käytössä se “ainoa oikea” versio eli 0.9.7 &lt;a href=&quot;https://www.spotify.com/fi/download/linux/&quot;&gt;6&lt;/a&gt;. Ks. myös muutaman muun täydellisesti kuvaamat tunteeni Spotifyn huonoimmasta uudistuksesta: https://www.reddit.com/r/spotify/comments/2y6a68/spotify_update_1011060gc75ebdfd_mega_discussion/cp9ozqf/ Ubuntulla Spotifyn ohjelmavaraston lisänneenä voi lähimmäksi pääsee Spotify:n versiolla 0.9.17. Version voi asentaa komennolla &lt;strong&gt;sudo apt-get install spotify-client-0.9.17&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;pelaaminen-&quot;&gt;Pelaaminen |&lt;/h4&gt;
&lt;p&gt;Pääasiassa pelaamani pelit eivät toimi Linuxeilla edes Winellä. Uusimmat pelit toimivat käytännössä vain DirectX 10 tai 11 turvin. Winen tukema viimeisin DirectX versio on tänään (Elokuu 2017) DirectX 9.0c &lt;a href=&quot;https://archive.is/20161008213028/https://wiki.winehq.org/FAQ%23Does_Wine_support_.NET.3F_Should_I_install_native_.NET_in_Wine.3F&quot;&gt;7&lt;/a&gt;. Olen toki unelmoinut pitkään että koko työpöytäympäristön voisi siirtää virtualisoituun ympäristöön ja täten vain pelejä voisi ajaa omissa Windows-virtuaalikoneissa. Tämäkin on ainakin vielä 2017 loputon suo (ajallisesti ja taloudellisesti), sillä pelaamani pelit kuten Battlefield 3,4 tai 1 vaativat käytännössä kaikki käytettävissä olevat resurssit. IOMMU / PCIe passthrough:n pohjautuvat ratkaisut ovat kyllä mahdollistaneet tälläiset ratkaisut jo useamman vuoden, mutta sekä ratkaisujen testaamattomuuden ja tuen puutteen takia en ole niihin vielä ehtinyt. Ks. Toimiviksi väitetyt GPU passthroughta käyttävät ratkaisut: https://www.reddit.com/r/pcmasterrace/comments/2z0evz/gpu_passthrough_or_how_to_play_any_game_at_near/ ja https://www.reddit.com/r/linux_gaming/comments/5yhxqf/quick_gpu_passthrough_guide/ Täällä myös hieman suorituskykytestejä: https://forum.level1techs.com/t/how-fast-is-kvm-host-vs-virtual-machine-performance/110192 
Ongelmaksi jää myös Windows-lisensointi, johon periaatteessa jokaiselle virtualisoidulle Windowsille täytyisi hommata retail -lisenssi.&lt;/p&gt;

&lt;p&gt;Joitakin harvemmin pelaamiani pelejä löytyy Linuxillekkin natiivina, kuten lapsuusvuosien suossikkini Transport Tycoon Deluxe. Pelistä on tehty käytännössä avoimen lähdekoodin (GPL) kopio, OpenTTD, joka vastaa vanhaa alunperin DOS:lla pyörinyttä Transport Tycoonin ‘Deluxe’ -versiota. Avoimen lähdekoodin versioon on lisätty paljon ominaisuuksia, modeja ja tietenkin suorituskykyparannuksia. Peli toimii natiivisti myös Windowsilla. Myös monet Half Life 2:n pelimoottoria käyttävät pelit, Half Life 1, HL2, Left 4 Dead, Team Fortress 2 ja Portal ovat toimineet Linuxilla vuodesta 2013.&lt;/p&gt;

&lt;h4 id=&quot;työpöydän-etäohjaus-järjestelmäriippumaton-&quot;&gt;Työpöydän etäohjaus (järjestelmäriippumaton) |&lt;/h4&gt;
&lt;p&gt;Windowsilla ja Linuxilla käytän Teamvieweriä, joka on ehdottomasti tämän hetken paras työkalu sekä Windows ja Linux työpöytien etäkäyttöön tai ohjaukseen. Ei-kaupallisessa käytössä Teamviewer on ilmainen. Teamvieweristä on saatavilla omat versiot käytännössä kaikille Linux-distroille. Kaikella hyvällä on kuitenkin huonot puolensa… Teamviewerin lähdekoodi on luonnollisesti täysin suljettua.&lt;/p&gt;

&lt;p&gt;Silloin tällöin käytän myös eri VNC-ohjelmia ja palvelimia, kuten TightVNC:tä ja TigerVNC:tä. Viimeaikoina olen kokeillut myös RDP:tä Linuxilla xRDP:llä. Teamviewer on kuitenkin edelleen kätevin ja tuskattomin, johtuen Teamviewerin palomuurien läpäisykyvystä. Samanlaista avoimen lähdekoodin versiota RDP:stä tai vaikka VNC:stä odotellessa…&lt;/p&gt;

&lt;h3 id=&quot;lähteet-&quot;&gt;Lähteet |&lt;/h3&gt;

&lt;p&gt;[1: https://www.asus.com/fi/Stick-PCs/QM1/specifications/&lt;/p&gt;

&lt;p&gt;[2: https://www.linuxquestions.org/questions/linux-hardware-18/asus-stick-pc-qm1-4175574279/#post5656074&lt;/p&gt;

&lt;p&gt;[3: https://www.chromium.org/developers/how-tos/api-keys&lt;/p&gt;

&lt;p&gt;[4: https://askubuntu.com/questions/225930/how-do-i-get-the-latest-beta-and-development-version-of-chromium&lt;/p&gt;

&lt;p&gt;[5: https://github.com/jomo/imgur-screenshot&lt;/p&gt;

&lt;p&gt;[6: https://www.spotify.com/fi/download/linux/&lt;/p&gt;

&lt;p&gt;[7: https://archive.is/20161008213028/https://wiki.winehq.org/FAQ%23Does_Wine_support_.NET.3F_Should_I_install_native_.NET_in_Wine.3F&lt;/p&gt;

&lt;p&gt;[8: http://www.javiersantos.me/post/82199053318/download-for-win-os-x-turn-back-to-the-previous-spotify&lt;/p&gt;

&lt;p&gt;[9: https://github.com/dylanaraps/neofetch&lt;/p&gt;

&lt;p&gt;[10: https://github.com/phw/peek&lt;/p&gt;

&lt;p&gt;[11: https://github.com/jml/undistract-me&lt;/p&gt;

&lt;p&gt;[12: https://www.sofokus.com/blogi/avoin-lahdekoodi/&lt;/p&gt;

&lt;p&gt;[13: https://www.gnu.org/philosophy/free-sw.html&lt;/p&gt;

&lt;p&gt;[14: https://www.gnu.org/licenses/license-list.html#Expat&lt;/p&gt;

&lt;p&gt;[15: https://linuxiumcomau.blogspot.com/2017/06/customizing-ubuntu-isos-documentation.html&lt;/p&gt;</content><author><name></name></author><category term="linux" /><category term="haaga-helia" /><category term="koulu" /><category term="infra" /><category term="such" /><category term="wow" /><category term="test" /><category term="tags" /><summary type="html">Publish H1 22.8.2017 ‘Livetikku’</summary></entry><entry><title type="html">Welcome to Jekyll!</title><link href="http://0.0.0.0:8080/jekyll/update/2017/08/22/welcome-to-jekyll.html" rel="alternate" type="text/html" title="Welcome to Jekyll!" /><published>2017-08-22T13:47:47+00:00</published><updated>2017-08-22T13:47:47+00:00</updated><id>http://0.0.0.0:8080/jekyll/update/2017/08/22/welcome-to-jekyll</id><content type="html" xml:base="http://0.0.0.0:8080/jekyll/update/2017/08/22/welcome-to-jekyll.html">&lt;p&gt;You’ll find this post in your &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;, which launches a web server and auto-regenerates your site when a file is updated.&lt;/p&gt;

&lt;p&gt;To add new posts, simply add a file in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory that follows the convention &lt;code class=&quot;highlighter-rouge&quot;&gt;YYYY-MM-DD-name-of-post.ext&lt;/code&gt; and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.&lt;/p&gt;

&lt;p&gt;Jekyll also offers powerful support for code snippets:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hi, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Tom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#=&amp;gt; prints 'Hi, Tom' to STDOUT.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Check out the &lt;a href=&quot;https://jekyllrb.com/docs/home&quot;&gt;Jekyll docs&lt;/a&gt; for more info on how to get the most out of Jekyll. File all bugs/feature requests at &lt;a href=&quot;https://github.com/jekyll/jekyll&quot;&gt;Jekyll’s GitHub repo&lt;/a&gt;. If you have questions, you can ask them on &lt;a href=&quot;https://talk.jekyllrb.com/&quot;&gt;Jekyll Talk&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">You’ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve, which launches a web server and auto-regenerates your site when a file is updated.</summary></entry></feed>